<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><head><script async src="https://www.googletagmanager.com/gtag/js?id=自己的G-MEASUREMENT_ID"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","自己的G-MEASUREMENT_ID")</script></head><title>计算机网络 | Satti's Blog</title>
<meta name=keywords content="408"><meta name=description content="关于计算机网络的基础知识笔记"><meta name=author content="Satti"><link rel=canonical href=https://Sattiluvcat.github.io/en/posts/notes/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/><link crossorigin=anonymous href=/assets/css/stylesheet.c5df81d78a700d63222bf88c998222af7e6085cc41585cba2eff58e49fd49e25.css integrity="sha256-xd+B14pwDWMiK/iMmYIir35ghcxBWFy6Lv9Y5J/UniU=" rel="preload stylesheet" as=style><link rel=icon type=image/png href=/favicon-48x48.png sizes=48x48><link rel=icon type=image/svg+xml href=/favicon.svg><link rel="shortcut icon" href=/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><meta name=apple-mobile-web-app-title content="MyWebSite"><link rel=manifest href=/site.webmanifest><link rel=alternate hreflang=en href=https://Sattiluvcat.github.io/en/posts/notes/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&display=swap" rel=stylesheet><script type=text/javascript async src="https://cdn.bootcss.com/mathjax/2.7.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML">MathJax.Hub.Config({tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["[[","]]"]],processEscapes:!0,processEnvironments:!0,skipTags:["script","noscript","style","textarea","pre"],TeX:{equationNumbers:{autoNumber:"AMS"},extensions:["AMSmath.js","AMSsymbols.js"]}}}),MathJax.Hub.Queue(function(){var e,t=MathJax.Hub.getAllJax();for(e=0;e<t.length;e+=1)t[e].SourceElement().parentNode.className+=" has-jax"})</script><style>code.has-jax{font:inherit;font-size:100%;background:inherit;border:inherit;color:#515151}</style><script async src="https://www.googletagmanager.com/gtag/js?id=自己的G-MEASUREMENT_ID"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","自己的G-MEASUREMENT_ID")</script><meta property="og:title" content="计算机网络"><meta property="og:description" content="关于计算机网络的基础知识笔记"><meta property="og:type" content="article"><meta property="og:url" content="https://Sattiluvcat.github.io/en/posts/notes/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-11-13T20:11:31+08:00"><meta property="article:modified_time" content="2024-11-27T18:20:31+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="计算机网络"><meta name=twitter:description content="关于计算机网络的基础知识笔记"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"文章","item":"https://Sattiluvcat.github.io/en/posts/"},{"@type":"ListItem","position":2,"name":"Notes📓","item":"https://Sattiluvcat.github.io/en/posts/notes/"},{"@type":"ListItem","position":3,"name":"计算机网络","item":"https://Sattiluvcat.github.io/en/posts/notes/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"计算机网络","name":"计算机网络","description":"关于计算机网络的基础知识笔记","keywords":[408],"articleBody":" 所有图片来自：计算机网络微课堂（有字幕无背景音乐版） 概述 概念 计算机网络 由结点node\u0026链路link构成 计算机网络可由交换机连接 多个计算机网络可由路由器连接成互连网（协议不定） 全球范围的互连网 = 互联网（统一采用TCP/IP协议） ISP 互联网服务提供商 组成与功能 组成 硬件+软件+协议 硬件：主机（end system端系统） 通信设备balabal 协议由硬件软件共同实现 边缘部分+核心部分 边缘 = 直接为用户服务 （从逻辑功能）资源子网+通信子网 资源子网 主要是主机 功能 数据通信（最基本最重要） 资源共享——硬件 软件 数据 分布式处理——eg.复杂任务多计算机处理 提高可靠性——eg.互为替代机 负载均衡 通信方式 电路交换eg.电话 通信时始终占用端到端线路资源 but 释放/建立连接需要额外时间开销 利用率低 报文交换eg.电报 无需提前建立连接 存储转发（通信线路可灵活分配） 线路利用率高 支持差错控制 but 报文不定长 不利管理 + 长报文存储转发时间、缓存开销大 + 长报文易出错 存储转发 = 先存储后转发 分组交换（现代网络采用） 定长——方便存储转发管理 + 转发时间更少（相对报文交换）+不易出错 控制信息占比增加（报文）+ 存在存储转发时延（电路交换）+ 分成多个分组 传输过程中可能出错 虚电路交换：虚拟电路建立连接 + 通信双方不独占线路 通信方式性能对比 电路交换 建立连接后再进行数据传送 最后连接释放 报文交换 中间节点需接收完整报文后再进行解析与转发 分组交换 分组进行报文交换 分类 分布范围 广域网WAN + 城域网MAN + 局域网LAN + 个域网PAN WAN多采用以太网 MAN 几乎全部采用以太网技术（城域网多归为局域网） 局域网可通过路由器接入广域网 个域网 eg.蓝牙 Zigbee等设备 传输技术：广播式网络 \u0026 点对点网络 拓扑结构： 总线形 广播式 存在总线争用问题 环形结构 广播式 令牌顺环形传递 有令牌才发数据 eg.令牌环网 星形结构 中央设备实现数据点对点传输 eg.以太网交换机连接的设备 网状结构 数据通过各中间节点逐一存储转发 eg.由many路由器构建的广域网 使用者：公用网 \u0026 专用网 传输介质：有线 \u0026 无线 性能指标 信道：向某一方向发送信息的通道（一条发送信道+一条接受信道 = 一个通信线路） 速率：连接到网络上的节点在信道上传输数据的速率 常用单位：bit/s bps（也会用B 1B=8b） 带宽：某信道能传送的最高数据率 吞吐量：单位时间通过某网络（or信道/接口）的实际数据量 时延：数据从网络/链路的一端到另一端所需的时间 发送时延 = 传输时延 传播时延：电磁波在信道中传播花的时间 时延带宽积 = 传播时延 x 带宽 往返时延RTT = 发送方发送完数据的时间到完全接收确认信息的时间 信道利用率 = 有数据通过的时间/利用信道的总时间 利用率过低 = 浪费带宽 过高 = 易网络拥塞 分层结构 同个功能可由不同层实现 结构不固定\n常见计网体系机构： OSI参考模型 + TCP/IP模型 + 五层结构（教学 分层结构概念：计网的各层及其协议的集合 概念： 实体：第n层的活动元素（硬件 软件） = 第n层实体 不同机器上同一层为对等层 同层实体为对等实体 协议（网络协议Network Protocol）：控制对等实体间通信规则的集合 水平 服务 下层为紧邻的上层提供的功能调用 接口（服务访问点SAP） 实体通过接口请求下一层实体的服务 协议 数据传输过程：协议添加在首部or尾部 eg.YSCS协议（压缩传输） 协议数据单元PDU=服务数据单元SDU + 协议控制信息PCI –\u003e 整体下一层的SDU 协议三要素：语法 语义 同步 同步（时序）——时间实现顺序的详细说明 OSI参考模型 分层：（如下） 分层任务： 第0层：物理传输媒体 物理层：相邻节点间比特的传输 数据链路层：差错控制 + 流量控制（协调两节点的速率）（以帧为单位进行数据传输） 网络层（把分组从源节点转发到目标节点）（以分组为单位进行数据传输） 路由选择：决定分组到目的节点的最佳路径 分组转发：选择合适端口转发分组 网际互连：异构网络互联（不同构造的网络） 其他功能 包括差错控制 流量控制… 传输层（端到端通信 端即端口 = 进程到进程）（以报文段segment为单位） 复用与分用 几个高层实体复用一条底层连接 在接收端分用 其他功能 包括差错控制 流量控制… 会话层（管理进程间会话） 表示层（解决不同主机上信息表示不一致的问题 应用层（实现特定的网络应用）（以报文为单位进行数据传输） TCP/IP模型 分层：网络接口层（≈物理层+数据链路层）+ 网络层 + 传输层 + 应用层（≈else层） 原因： 表示层\u0026会话层可以不用（需要时可在应用层进行处理） 网络层下主要是硬件部分（厂商可自由发挥so合并） 特点： 网络层不进行差错控制 only保证最大能力交付 传输层负责数据正确可靠性 物理层 不隔离广播域 冲突域\n通信基础基本概念 综合： 信源发送信号（数据的载体）到信宿 信号：数字信号 or 模拟信号 信号值离散 or 连续 码元：每个信号就是一个码元 信号周期 = 码元宽度 若一个码元可能有4种状态 = 4进制码元 = 一个码元携带2bit数据 速率：波特率 + 比特率 波特率：码元/秒 = 波特Baud 比特率：比特/秒 信道的极限容量 噪声：对信号产生干扰 奈奎斯特定理 无噪声（理想）低通信道\n极限波特率 = 2W（单位：波特） W为信道频率带宽（单位：Hz） 说明： 若波特率过高 = 导致码间串扰（接收方无法识别码元） 缺点：并未对码元可以携带多少比特做解释 香农定理 有噪声 带宽有限\n极限比特率 = $Wlog_2(1+S/N)$（此处信噪比无单位） $S/N$ 信噪比 = 信号功率/噪声功率 以dB为单位表示为$10log_{10}S/N$ 结合Nyquist可知，带宽、信噪比确定的信道上，一个码元可携带的比特数有上限 编码与调制 概念 信源–\u003e变换器–\u003e信道–\u003e反变换器–\u003e信宿 变换器：将二进制数据转换为信号 转换为数字信号 = 编码 转换为模拟信号 = 调制（eg.光猫） 反变换器：将信号转换为二进制数据 数字信号转换 = 解码 模拟信号转换 = 解调 编码 方法 不归零编码NRZ——低电平（表示）0，高电平（表示）1，中间不跳变 归零编码RZ——低电平（表示）0，高电平（表示）1，中间归零 反向非归零NRZI——遇0跳变，遇1不跳变，中间不跳变（看起点决定0/1） 曼彻斯特编码——遇0上/跳，遇1下/上跳，中间会跳变（看中间） 差分曼彻斯特——遇0跳变，遇1不跳变，中间会跳变（看起点） 特点 自同步能力——信源信宿可以根据信号实现节奏同步（知道断点在哪） 1无 3增加冗余位时可支持自同步 浪费带宽——每个信号（0/1）中间需要变化时就会浪费带宽 2 4 5浪费 3浪费一点 抗干扰能力 1 2 3弱 调制 调制方法 调幅AM幅移键控——调整正弦波振幅 调频FM频移键控——调整正弦波频率 调相PM相移键控——调整正弦波相位 正交幅度调制QAM——m种幅值 n种相位复合 QAM-32指调制出32种信号 = 每个码元可以携带32bit信号 传输介质 有线常用传输介质 双绞线：两导线绞合而成 有屏蔽层 = 屏蔽双绞线STP 无屏蔽层 / 非屏蔽双绞线UTP 抗干扰能力较好（绞合\u0026屏蔽层） 局域网网线 同轴电缆：内导体\u0026外导体屏蔽层 内导体越粗 电阻越低 信号衰减越少 抗干扰能力好（屏蔽层） 早期局域网 光纤：纤芯（高折射率）\u0026包层（低折射率）= 单模光纤（一条光线传输）/ 多模光纤（多条光线） 单模光纤适合长距离 多模光纤适合短距离 抗干扰能力非常好 信号传输损耗小（中继器少） 命名规则 以太网For有线传输介质\n速度+Base+介质信息 Baseband基带传输 传输数字信号采用曼彻斯特编号 无线传输介质 无线电波（长波）——穿透能力强（绕射性好） 传输距离长 信号指向性弱 手机信号 WiFi 微波通信（短波）——频率带宽高 信号指向性强 保密性差 物理层接口特性 机械特性 + 电气特性 + 功能特性 + 过程（规程）特性 物理层设备 中继器Repeater 传输距离太长 数字信号会失真\nonly两端口 一个接收信号 –\u003e 整形再生 –\u003e 另一端口 仅支持半双工通信（一次只能处理一个方向） 两个端口对应两个网段 集线器hub 多端口中继器\n各节点不可同时发送数据 冲突域：若两主机同时发送数据会冲突 则其处于同个冲突域 在发数据前需信道争用 都不能无限串接 数据链路层 隔离冲突域（eg.网桥）\n概述 概念 链路Link：从一个结点到相邻结点的一段物理线路 数据链路：链路 + 实现通信协议的软硬件 以帧为单位传输处理数据 三个问题 封装成帧：为网络层协议数据单元添加帧头帧尾（成为帧） 差错检测：发送方将检错码封装在帧尾 检测是否有误码 检错码根据发送内容 检错算法而不同 可靠传输：即使检出错误，发送方也能保证接收方得到正确信息 封装成帧 帧头帧尾 作用：帧定界 + ··· 让接受层确定一帧的起始点 有的协议不通过帧头帧尾提供帧定界功能 以太网V2的MAC帧通过帧间间隔实现 透明传输 定义：数据链路层对上层交付的传输数据没有任何限制 实现：面向字节的物理链路使用字节填充方法实现 \u0026 面向比特的物理链路使用比特填充方法实现 在特殊字符前添加转义字符 比特流中可采用零比特填充法 帧的长度 为提高运输效率 应使帧的数据部分长些 每种数据链路层协议都规定了👆的长度上限MTU（最大传送单元Maximum Transfer Unit） 差错检测 相关概念 比特差错：比特在传输过程中 0可能变为1··· 误码率BER：一段时间内 传输错的比特占总比特数的比例 校验方法 奇/偶校验：添加1位奇偶校验位 使所有数据中（包括其自己）1的个数为奇/偶 漏检率高 循环冗余校验CRC：约定一个生成多项式 发送方基于数据与多项式计算得冗余码 接收方通过其计算 生成多项式各项系数构成比特串eg.$1x^4+0x^3+1x^2+1x^1+0*x^0$ 对应$10110$ 特点 只能检测 不能定位（定位开销大 不采用） CRC硬件实现容易 可靠传输 概念 传输差错包括比特差错 分组丢失 分组失序 分组重复（一般出现在数据链路层上层）··· 可靠传输服务各层均可选择实现 不局限于此层 实现机制 可被应用到各层协议中\n停止-等待协议SW 属于自动请求重传ARQ Automatic Repeat reQuest\n基本过程：发送方发送分组–\u003e接收方校验正确给发送方发送ACK接收信号–\u003e接收方再次发送。若校验错误 接收方返回NAK否认信号 发送方重传 改进： 超时重传：设定超时计时器 若到达重传时间发送方未接收到信号则重传 设定重传时间略大于平均往返时间 数据链路层点对点往返时间较为确定——重传时间较好设定 设置编号：避免分组重复（接收方返回信号丢失后重传原数据） 只需保证与上次发送的数据不同——一个比特即可 （避免确认分组迟到）接收端返回信号进行编号——与发送方的编号一致 数据链路层一般不会出现 信道利用率$U$：往返时延$RTT$远大于数据帧发送时延$T_D$时，信道利用率非常低 回退N帧协议GBN 又名滑动窗口协议\n基本过程：发送方设置发送窗口，同时将窗口内的所有分组发送（需编序号）–\u003e接收方接收到后发送成功接收信息–\u003e接收窗口滑动按序号接收–\u003e发送方收到确认后 发送窗口向前滑动 发送窗口尺寸的取值范围：小于等于序号（eg.0~7 则最大为7） 若等于8 接收方无法分辨新旧数据分组 接收方窗口尺寸=1 差错：发送的信息中某分组错误，整个窗口的数据由于不能匹配被接收方丢弃–\u003e发送方也重传未被接收的帧eg.从有误码的帧开始（发生超时重传时）==\u003e回退N帧 优化： 累计确认：接收方可以在收到几个数据分组后对按序到达的最后一个分组发送确认$ACK_n$，表示n前的都接收了 发送方收到多个重复确认时 可在重传计时器超时前开始重传 选择重传协议SR 不能再进行累计确认 需要逐一确认 实现发送方仅重传错误分组\n基本要求：发送窗口尺寸$W_T\u003c=2^{n-1}$ \u0026 接收窗口尺寸调整 一般设置与发送窗口尺寸相同（或小于） 若发送方大于，eg.发送方设置为5（最大为4）接收方0号丢失，发送方向后滑到5 6 7 0号，则0号混淆 过程：发送方收到未按序到达的确认分组信号时，对其进行记录，避免超时重发，且不可整体向前滑动（必卡在未收到确认的信号之后） 点对点协议PPP 最广泛的点对点数据链路层协议\n为传输的各种数据报提供标准方法：封装成帧+链路控制协议LCP+一套网络控制协议NCPs NCPs每个协议支持不同的网络层协议 帧格式 0x7E十六进制==\u003e01111110二进制 透明传输实现： 面向字节的异步链路——插入转义字符的字节填充法 面向比特的同步链路——插入0的比特填充法 差错检测：对每个收到的PPP帧进行CRC检验 不通过的帧丢弃 向上不提供可靠传输 媒体接入控制MAC Medium Access Control\n基本概念：共享信道需协调多个发送与接收站点对一个共享传输媒体的占用 类型：静态划分信道 / 动态接入控制 静态多在物理层中应用 动态包括受控接入（以下两分类）与随机接入eg.共享式以太网 集中控制：主站轮询 分散控制：令牌轮流 静态划分信道 信道复用：一条物理线路同时传输多路用户信号 常见复用技术： 频分复用FDM：占用不同的频带资源 时分复用TDM：占用不同时隙 每个时隙周期出现 波分复用WDM：占用不同波长 码分复用CDM：（多用于多址接入 码分多址CDMA）各用户可同时在同样的频带上通信 使用不同码型 每个比特时间被划分为m个短间隔（码片Chip） 每个站被指派唯一的m bit码片序列 若要发送比特1 则发送自己的码片序列 0 则发送码片序列反码 每个站的码片序列必相互正交且不同==\u003e接收站对收到的叠加信号与各站的码片序列相乘，得到-1则该站发送了0，得+1则发送了1，其它则未发送 动态接入控制——随机接入 CSMA/CD （早期以太网）载波监听多址接入/碰撞检测 多址接入MA：多站连接在一条总线上 竞争使用 载波监听CS：每个站发送帧前先检测总线上是否有其他站点在发送，若有96比特时间空闲，则发送 CD：每个正在发送帧的站边发送边检测碰撞，若发生则立即停止发送，过段时间继续 争用期：主机最多经过多久可检测到本次发送是否遭受碰撞 最小帧长：若过小，发送方不知发生了碰撞 最大帧长：若过大，其它主机长时间无法发送信号，接收端也可能溢出 截断二进制指数退避算法：退避时间 = 基本退避时间（争用期） x 随机数r r从0,1,…,$2^k-1$中随机取，$k=min[重传次数,10]$ 退避时间随重传次数增加而增大（动态退避） 可减小发生碰撞的概率 信道利用率——$S=\\frac{T_0}{T_0+\\tau}$ $T_0$为发送成功时间 $2\\tau$为争用期 CSMA/CA （无线）CA 碰撞避免\n帧间间隔：（802.11标准规定）所有站点必须在持续检测到信道空闲一段指定时间后才能发送帧 短帧间间隔SIFS：分隔开属于一次对话的各帧 DCF帧间间隔DIFS：在DCF方式中用来发送数据帧 \u0026 管理帧 相关问题与解答： why：源站检测到空闲后还要等待DIFS？ 让优先级更高的帧（其他站上）先发送 why：目的站正确接收数据帧后还要等待SIFS？ 完成从接收到发送的状态切换 why：其他站要退避随机时间？ 避免同时发送 使用退避算法的情况： 发送数据帧之前检测到信道忙 每次重传数据帧 每次成功发送后要连续发送下一帧（避免一个站点长时间占用信道） 退避算法：站点为退避计时器设置一个随机的退避时间，计到零开始发送，若信道转忙则冻结等其转闲后经过DIFS后继续计数 进行第i次退避时，退避时间在0,1,…,$2^{2+i}+1$中随机选择并乘基本退避时间 基本退避时间 = 一个时隙的长度 第六次退避后 不再增加（达到255） 减少选择相同退避时间的概率 允许对信道进行预约 发送数据帧前发送短控制帧 = 请求发送RTS RTS碰撞则执行退避算法重传RTS 目的站收到且空闲 发送响应控制帧 = 允许发送CTS 发送站收到并等待SIFS后可发送 其他站收到CTS后推迟接入 虚拟载波监听：监听到RTS/CTS/数据帧，即可知道信道被占用的持续时间 减少隐蔽站带来的碰撞问题 MAC地址 IP地址 ARP协议 MAC地址是以太网的MAC子层使用的地址——数据链路层中 IP地址是TCP/IP体系结构网际层使用的地址 ARP协议属于TCP/IP的网际层 可以通过IP地址获取到MAC地址\nMAC地址 链路层首部封装\n（多个主机在同个广播信道上）需要唯一的数据链路层地址 每个帧中需携带标识发送主机和接收主机的地址——MAC地址 一般被固化在硬件上 = “硬件地址” = “物理地址”（win系统中）但不属于物理层 每个网络适配器都有一个全球唯一的MAC地址——对各接口的唯一标识（而非设备） （IEEE 802局域网）MAC地址格式：组织唯一标识符OUI（三字节） + 网络接口标识符（三字节） OUI由注册管理结构分配 后3字节由厂商分配 通常将每4个比特用一个16进制数表示 = 12个的16进制数 MAC地址的第1字节的b0位（第0位）取0表示单播地址 取1表示多播地址 MAC地址的第1字节的b1位（第1位）取0表示全球管理 取1表示本地管理 MAC地址类型👆： 全球+单播：厂商生产网络设备时固化 全球+多播：标准网络设备支持的 本地+单播：网络管理员分配 覆盖全球单播 本地+多播：用户配置主机软件 表明其对多播组的从属关系 地址发送顺序：第一字节-\u003e第六字节 b0-\u003eb7 单播/广播/多播MAC地址：接收方地址（广播填全F 多播填多播组地址） 若多播组地址在接收方的多播组列表中 则接收 IP地址作用（网络层） 若要接入因特网 = IP地址+MAC地址 / 若不接入 只需MAC地址\n组成：网络编号+主机编号 主机编号：标识同一网络上不同主机/路由器各接口 数据包转发过程： 每个链路结束 目的MAC地址与源MAC地址都会改变 IP地址始终如一 每个设备只知下一设备的IP地址 不知MAC地址——地址怎样转变？ARP协议 ARP协议 广播\n封装在MAC帧中 所有主机检查是否请求的是自己的MAC地址 若否则忽略 若是，（添加到自己的ARP高速缓存）则单播发送自己的MAC地址 原请求端将其保存到自己的ARP高速缓存中 ARP只能在一个网络/一个链路中使用 不可跨网络 集线器与交换机 集线器：逻辑上仍是总线网 + 只在物理层工作（不进行碰撞检测）+ 一般有少量的容错能力 集线器HUB在物理层扩展以太网：集线器连接其它集线器 以太网交换机：多接口（全一般双工）+ 能同时联通多对接口 + 工作在数据链路层（包括物理层） 帧交换表（自学习算法建立）：查找帧的目的MAC地址对应的接口号 帧的转发方式：存储转发 \u0026 直通交换（基于硬件的交换矩阵） 对比：集线器会扩大冲突域 交换机会隔离冲突域 以太网交换机自学习\u0026转发帧 自学习：盲目泛洪（发给所有接口）——记录接收接口的号（及其MAC）与发送的接口号（及其MAC） 到期自动删除记录 以太网交换机生成树协议STP 提升以太网可靠性：添加冗余链路（负面效应：网络环路（问题👇） 广播风暴——大量消耗网络资源 无法正常转发其他数据帧 主机收到重复的广播帧 帧交换表反复振荡（同一MAC地址但接口一直变化） （改良）生成树协议STP——自动计算并构建一个逻辑上没有环路的网络——树形 网络物理拓扑发生变化时，生成树需重新计算 VLAN虚拟局域网 多个以太网交换机互连起来的交换式以太网 所有站点属于同一广播域\n广播域过大弊端：广播风暴 + 难以管理维护 + 潜在的安全问题 分割广播域方法：路由器隔离（工作在网络层） / VLAN VLAN：将设备划分为与物理位置无关的逻辑组的技术 VLAN实现机制 IEEE 802.1Q帧——在MAC帧中源MAC地址后插入4字节VLAN标记 交换机收到普通的以太网帧时 插入标记 = “打标签” 转发时 可能删除 = “去标签” 交换机端口类型：（交换机各端口的缺省VLAN ID 👇称为PVID） Access——一般连接用户计算机 只能属于一个VLAN PVID与端口所属VLAN的ID同 若帧中VID与端口PVID同 则去标签并转发 否则不转 Trunk——交换机间/交换机与路由器间的互连 可以属于多个VLAN 用户可设置其PVID值 发送：对VID=PVID的帧——去标签后转发 / 不等的帧——直接转发 接收：接收未打标签的帧 根据接收帧的那个端口的VLAN打标签 Hybrid——Trunk Access能用的地方都能用 其它与trunk类似 除发送处理方法：查看帧的VID是否在端口的去标签列表中（其余同👆） 应用如下👇 网络层 实现网络互连（路由器）——数据包传输\n三个问题：向运输层提供的服务 + 网络层寻址 + 路由选择 TCP/IP协议栈的网络层使用网际协议IP so 被称为网际层 提供的服务 面向连接的虚电路服务 可靠通信由网络保证 必建立网络层的连接（虚电路VC）——通信双方沿已建立的虚电路发送分组 目的主机地址在建立后不再需要 在分组首部携带VC编号即可 存储转发方式 通信结束后 释放VC 无连接的数据报服务 因特网使用——网络造价低\n可靠通信由用户主机保证 不需建立网络层连接 每个分组可走不同路径 每个分组首部需携带目的主机的完整地址 监测到拥塞时可合理丢弃IP分组\nIPv4地址 概述 因特网上每个主机/路由器的每个接口分配全世界unique的32bit标识符\n发展：分类编址–\u003e划分子网–\u003e无分类编址 表示方法：点分十进制表示方法——每8bit分为一组 用.隔开 分类编址 五类地址👆 ABC类可分配给主机/路由器的各接口 主机号全0 = 网络地址 不能分配给主机（···） 主机号全1 = 广播地址 不能分配···——该网络上所有地址都可收到目的地址为广播地址的信息 A类：最小网络号0保留不指派 最大网络号127作为本地环回测试地址不指派 最小本地环回测试地址：127.0.0.1 （主机号不能全0全1） B类：最小网络号128.0（除首位全0）最大网络号191.255（除二位全1） C类：类似B类👆 网络号范围192~223 划分子网 子网掩码——表明IP地址的主机号中有几个比特被借走作为子网号 连续1 = 网络号（不变）+子网号（占原来主机号的位置） 连续0 = 主机号 运算即得所在子网的网络地址 默认的子网掩码：未划分子网时使用的子网掩码 eg.255.0.0.0（A类） 无分类编址 无分类域间路由选择CIDR\n编写方法：斜线记法 eg.128.14.35.7/20 20表示网络前缀所占的比特数（后面的是主机编号） 将网络前缀都相同的连续的IP地址组成CIDR地址块 聚合C类网数量 = 地址数量 / C类网前缀数量 $2^8$ 主机号依然不可全0全1\n路由聚合（构造超网）——eg. 一个路由可以保存其连接的网络的地址的共同前缀 发送给其他路由 = 路由聚合后的目的网络地址（主机号设为0） IPv4地址的应用规划 定长的子网掩码FLSM：用同个子网掩码划分子网 每个子网需要的IP地址数量不同时 会造成浪费 变长的子网掩码VLSM：不同子网掩码划分——每个子网分配的IP地址数量不同 起点位置选择子网中块数量（初步分配的地址数量eg.6台主机+1路由器地址+1广播1网络=9 则选16）的整数倍 可以从主机多的子网开始分 IP数据报的转发与发送 =主机发送+路由器转发 以下忽略ARP与以太网交换机的工作过程\n数据报传递方式：直接交付（以太网交换机可交付） \u0026 间接交付（需路由器中转） 主机发送过程：主机A将自己的IP与子网掩码做\u0026运算，得到网络地址—-\u003e将目标IP与子网掩码\u0026 若网络地址不同–\u003e需要路由器转发（不在同一子网） how主机知道路由器？ 给每个主机设置默认网关 即对应路由器的IP地址 路由器转发过程：检查IP数据包首部是否出错（差错校验）（错则丢弃并通知源主机）–\u003e根据数据报的目的地址在路由表中查找匹配条目（与路由条目中的地址掩码\u0026，检查网络号是否匹配）–\u003e转发 若不匹配则丢弃并通知源主机 采用最长前缀匹配 注意：广播数据报路由器不会转发（隔离广播域） 静态路由配置及路由环路问题 静态路由配置：人工配置路由表（指定目的网络地址与下一跳的接口） 不能及时适应网络状态（拓扑 流量等）的变化 可能导致路由环路的原因： 配置错误 聚合了不存在的网络 网络故障 特殊概念 默认路由：具有相同下一跳的不同目的网络的路由条目 可以将目的网络写作0.0.0.0/0（静态） 其它的所有目的网络都转向此接口 特定主机路由：设置目的网络地址为目的主机的IP 子网掩码有32位1（静态） 下一跳还是在特定主机连接的路由器接口 可能的路由环路 配置错误（配置了循环的下一跳接口）：IP数据报首部设置生存时间TTL 进入路由器后减一 若某次进入后TTL=0 则丢弃 聚合不存在的网络（本应将错误IP丢弃）：可添加针对不存在的网络的黑洞路由 即下一跳设置为null0 网络故障（某IP地址的网络出现故障 路由器自动丢弃对应路由表条目）：添加针对该网络的黑洞路由 路由选择协议 概述 静态路由选择：人工配置——小规模网络 不能及时适应网络状态变化 动态路由选择：自动获取路由信息（by路由选择协议） 特点与👆反 因特网路由选择协议特点：自适应（动态） + 分布式（路由器间交换路由信息） + 分层次（因特网划分为许多较小的自治系统AS） 因特网的分层次路由选择协议：（网关 = 路由） 自治系统内部采用内部网关协议IGP AS间采用外部网关协议EGP 常见的内部网关协议： 路由信息协议RIP——基于距离向量 内部网关路由协议IGRP——基于距离向量 增强型内部网关路由协议EIGRP——结合距离向量与链路 开放式最短路径优先OSPF——基于链路 中间系统到中间系统IS-IS——基于链路 常见EGP：边界网关协议BGP 路由器基本结构：路由选择部分（周期性与其它路由器交流并更新） + 分组转发部分 转发表from路由表 路由报文可更新路由表 具有输入输出缓冲区 RIP 最先得到广泛使用的IGP 用UDP协议直接封装报文 后由IP协议封装\n要求：AS内每个路由器维护自己到其它每个网络的距离记录——距离向量D-V（一组距离） 用跳数Hop Count作为度量 直连网络–路由器 = 1；非直连网络–路由器 = 经过的路由器数+1 一条路径最多15个路由器 = 只适用小型互连网 特点： 若有多条距离相等的路由 可进行等价负载均衡 包含要点：仅与相邻路由器交换信息 + 交换路由表 + 周期性交换 基本工作过程 = 路径规划（收敛则找到最短路径）\n更新规则：判断到达网络是否更新–\u003e下一跳是否相同–\u003e相同时更新消息 不同时比较路径长短 等于时添加做负载均衡 问题：“坏消息传得慢”（发生故障后👇） = 路由环路/距离无穷计数问题 D-V算法固有问题 减少问题的措施：限制最大路径距离 路由表发生变化时就发送更新报文（触发更新） 不让同一路由信息通过此接口反向传送（水平分割） OSPF 采用Dijkstra提出的SPF（最短路径算法） 基于链路 + 不会产生路由环路 + 不限制网络规模 收敛快 实现： 通过交互问候（Hello）分组 维护邻居关系 封装在IP数据报中 发往组播地址224.0.0.5 每个路由器产生LSA链路状态通告 包括直连网络链路状态信息 \u0026 邻居路由器的 被封装在链路状态更新分组LSU中 洪泛法发送 每个路由器用LSDB链路状态数据库存储LSA 通过洪泛法 最终所有路由器的LSDB一致 基于LSDB进行SPF计算 构建路由表 五种分组类型：Hello 数据库描述 链路状态请求 链路状态更新 链路状态确认 周期时间/更新信息/回应其它路由器请求时 发送链路状态更新分组 多点接入网络中：选举指定路由器DR \u0026 备用的指定路由器BDR 所有的非DR BDR只与其建立邻居关系 将一个AS划分为若干的区域 有自己的标识符 所有接口在区域内 = 区域内路由器IR 区域边界路由器ABR 与其他区域联通（两接口 一对外一对内） 主干路由器BBR 主干区域内的路由器 自治系统边界路由器ASBR 与其它自治系统交换信息 BGP 自治系统内度量采用的代价不同 故自治系统间不可用代价作为度量\n每个AS需有至少一个BGP发言人 不同AS的发言人交换路由信息前需建立TCP连接 端口号179 交换BGP报文以建立BGP会话 以此交换路由信息 交换网络可达性信息 后找出到达各AS较好的路由——无环连通图 四种报文（BGP-4）：打开 更新 保活 通知 IPv4数据报首部格式 IP数据报\n固定部分20字节 + 可变部分40字节 固定部分中每个区域都以4字节为单位（要么4要么8要么····） 解释： 版本：通信双方采用的IP协议版本必相同 首部长度：最小取值为5（仅有20字节固定部分） 最大15（20固定+40可变） 可选字段：长度1字节~40字节 填充字段：确保首部长度为4字节的整数倍 区分服务：区分不同等级的服务质量 总长度 = 首部 + 数据载荷 解释：根据以太网MTU将数据载荷分片以封装成帧 标识：同一数据报的各分片应具相同标识 标志：3bit DF位（1不许分片 0允许分片） MF位（1后还有分片 0此为最后分片） 保留位（必为0） 片偏移：分片数据报的数据载荷相对原数据报偏移的单位（以8字节为单位表示 eg.偏移32个字节则在此写4） 解释： 生存时间TTL：原来以秒为单位 现在以跳数为单位 （路由器转发时减一若为0则丢弃 协议：指明数据部分是哪种协议单元（ICMP-1 IGMP-2 TCP-6 UDP-17 IPv6-41 OSPF-89） 首部检验和：差错检查 比CRC简单 = “因特网检验和” IPv4所有路由器都要检查 IPv6不再检查 网际控制报文协议ICMP 更有效地转发IP数据报 提高交付成功地机会\n特点：主机/路由器用ICMP发送差错报告报文\u0026询问报文 + 被封装在IP数据报中 差错报告报文 终点不可达：不能交付数据报 向源点发送 源点抑制：路由器/主机由于拥塞丢弃数据报 向源点发送（源点发送速率放慢） 时间超过：TTL 丢弃时向源点发送 分片不完整时 全部丢弃 参数问题：首部中检验与字段发现误码 改变路由（重定向）：路由器将改变路由报文发送给主机 不发送的情况：对ICMP差错报文不发 第一个分片的后续报片 具有多播地址的数据报 特殊地址（127.0.0.0等） 询问报文 回送请求与回答——测试目的站是否可达（收到的主机必须回答） 时间戳请求和回答——时钟同步 测量时间 应用 分组网间探测PING（packet Internet groper） 应用层直接使用网际层的ICMP 不通过运输层的TCP or UDP 跟踪路由traceroute 测试IP数据报从源主机到目的主机经过哪些路由器（原理：时间超过差错报告） 应用层直接使用网际层的ICMP 不通过运输层的TCP or UDP Unix中在运输层使用UDP 虚拟专用网VPN网络地址转换NAT VPN virtual private network VPN中各主机分配的地址是某机构可自由分配的专属地址（IPv4地址紧缺） “IP隧道技术” 分类：内联网VPN \u0026 外联网VPN NAT network address translation 使用内部专用地址的专用网络用户共享少量外部全球地址以访问因特网 过程：NAT路由器为发送端分配一个全球IP地址 并修改数据报的源地址 并记录内外网地址对应关系 可以将运输层端口号与IP一起转换=一个全球IP地址可使多个（内部）主机与外通信 IP地址同 端口号不同 网络地址源端口号转换NAPT else：外网主机不能首先发起通信（NAT屏蔽了内网主机的网络地址）——NAT穿越技术 运输层 运输层概述 提供面向连接的TCP \u0026 无连接的UDP 运输应用进程 不同进程用不同端口接收（非物理意义上的端口） 运输层端口号 复用 分用 端口号 需用统一方法对TCP/IP体系的应用进程标识——端口号区分（16比特） 端口号只具有本地意义——本计算机应用层的各进程 熟知端口号 登记端口号 短暂端口号 发送方复用 接收方分用 应用报文（不同端口）–\u003eUDP复用/TCP复用–\u003e用户数据报（UDP封装）/报文段（TCP封装）–\u003eIP复用 成为IP数据报–\u003e接收方对IP分用成用户数据报/报文段–\u003e分用成应用报文 应用层的不同协议在运输层使用不同协议的不同端口号（eg.http-\u003eTCP 80 https-\u003eTCP 443） 在网络层都使用IP协议 UDP TCP对比 UDP 用户数据报协议——无连接（过程） 支持单播多播广播 对应用层报文不合并不拆分 误码 丢失不处理 数据报首部仅8字节 TCP 传输控制协议——三报文握手建立连接 四报文挥手释放连接 仅支持单播 面向字节流 不保证传输的数据大小完全一致（交付时不检查传输了多少数据） 不会误码 丢失等 TCP流量控制 让发送方发送速率不过快 来得及接收——滑动窗口实现\n普通的滑动窗口算法（类帧） 接收方发送ACK ack=n表示n之前的数据已收到 设置零窗口持续计时器——到时时向接收方发送零窗口探测报文段 得到窗口大小 TCP拥塞控制 理想的拥塞控制——网络吞吐量=输入负载 输入负载过高 吞吐量不变 无拥塞控制时 输入负载过大吞吐量反而减小 方法 维护拥塞窗口变量——超时重传时判定为网络拥塞 发送方将拥塞窗口作为发送窗口\n维护慢开始门限ssthresh状态变量——大于拥塞窗口时 采用慢开始算法 小于时采用拥塞避免算法 等于时均可使用 不拥塞时拥塞窗口增大 拥塞时减小 慢开始算法：每接到一个确认 指数级增大窗口 拥塞避免算法：窗口只加一 若超时重传——慢开始门限设为一半 窗口设置为1 快重传算法：（尽快重传）发送方收到三个连续的重复确认就重传 接收方立即发送确认 收到失序报文段立即发出重复确认 部分丢失不会认为是拥塞\n快恢复算法：收到3个重复确认后执行 发送方将慢开始门限与拥塞窗口调整为当前窗口的一半 执行拥塞避免 TCP超时重传时间的选择 略大于往返时间\n利用每次的往返时间RTT样本 计算加权平均往返时间👇 超时重传时间RTO：$RTO=RTT_S+4*RTT_D$ $RTT_D$ RTT偏差的加权平均👇 （针对超时重传时测不准RTT问题）Karn提出不采用超时重传的RTT样本 时延突然增大——修正：出现超时重传时$RTO$变为原来2倍 TCP可靠传输实现 以字节为单位的滑动窗口实现——类似报文段（不赘述）\n发送方窗口大小根据接收方确定 但同时刻不一定总一样大 TCP未明确规定如何处理不按序到达的数据 通常先临时存放 收到缺失的数据时再按序交付（应用进程） 接收方必须有累计确认\u0026稍待确认 全双工通信 TCP运输连接管理——连接建立 解决的问题：确知对方存在 + 协商参数 + 分配运输的实体资源 具体过程 三报文握手\nTCP服务器被动等待TCP客户的连接请求 客户主动发起连接请求 过程： TCP服务器创建传输控制块 从关闭状态进入监听状态——被动打开连接 客户创建传输控制块 向服务器发送连接请求报文段 进入同步已发送状态 SYN=1 seq=x 表示其为连接请求报文段 不能携带数据——主动打开连接 服务器发送对TCP连接请求的确认 进入同步已接受状态 SYN=1 ACK=1 ack=x+1 seq=y 也不能携带数据 客户发送对确认的确认 进入连接已建立状态（数据load部分可以携带请求内容） ACK=1 seq=x+1 ack=y+1 服务器接收后 进入连接已建立状态 客户与服务器的seq由各自决定 但ack序号与对方的seq有关（+1） 不能两握手的原因：避免失效的连接请求报文段传输到服务器（服务器直接开启连接已建立状态 但客户不会理睬 浪费资源） 连接释放 四报文挥手\n过程： 客户发送连接释放报文段 进入终止等待1状态——主动关闭 FIN=1 ACK=1 seq=u ack=v seq是客户发送的最后字节序号+1 ack是客户收到的（服务器发送的）最后字节序号+1 服务器发送普通确认报文段 进入关闭等待状态 并通知上层应用 ACK=1 seq=v ack=u+1 ——此时进入半关闭状态 客户不发送只接受 服务器继续发送没有发完的数据 服务器发送连接释放报文段 进入最后确认状态（应用数据发完 让其关闭）——被动关闭 FIN=1 ACK=1 seq=w ack=u+1 seq表示服务器自己发送的最后数据 ack是对客户发来的信息的重复确认 客户发送普通确认报文段 进入时间等待状态 ACK=1 seq=u+1 ack=w+1 seq要消耗一个序号 服务器接收后进入关闭状态 客户发送后经过2MSL时间进入关闭状态 MSL——最长报文段寿命 若客户直接关闭 确认报文段若遗失 服务器无法关闭 保活计时器：服务器每收到一次客户数据就重重启保活计时器——若保活周期内未收到 则发送探测报文段——连续发送探测不回复 则服务器关闭连接 TCP报文段首部格式 固定首部20字节 + 扩展（可变）首部最大40字节 组成： 源端口——16bit 标示 发送 报文段的 应用进程 端口号 目的端口——16bit 接收报文段的应用进程端口号 序号——32bit 本报文段数据load的第一个字节序号 确认号——32bit 若为n 表示n-1号及以前的数据都接收 需要n号数据 *ACK位为1时才有效 数据偏移——数据load起始处到报文段起始处有多远 = TCP报文段首部长度（以4字节为单位） 窗口——发送方的接收窗口大小 流量控制 校验和——检查首部与数据load（计算时要在报文段前加12字节伪首部） SYN同步标志位 终止标志位FIN 复位标志位RST（复位TCP连接）——取1时 表示TCP连接出现异常 需重新建立连接 可用来拒绝非法报文段 拒绝打开TCP连接 推送标志位PSH：若为1 该报文段会尽快上交应用进程 紧急功能：紧急标志位URG（取1有效）+紧急指针（指明紧急数据长度） = 紧急数据放到发送缓存最前 立刻封装后发送——接收缓存中同 扩展首部：选项部分可添加很多选项👇 填充部分将保证首部能被4整除 应用层 概述 最顶层\n各层应用 客户/服务器方式与对等方式 C/S方式与P2P方式 client/server \u0026 peer to peer\nC/S 客户计算机\u0026服务器计算机\n客户请求服务 服务器提供服务 服务器始终运行 等待请求 \u0026 具有固定端口号 \u0026 运行服务器的主机具有固定的IP地址 服务集中型——会出现服务器跟不上客户机请求的情况——使用计算机群集（服务器场）构建虚拟服务器 P2P 对等方互为请求与服务方 双方直接通信——服务分散型 可扩展性（规模增大 性能不降低） 动态主机配置协议DHCP 通过DHCP自动获取网络配置信息 C/S类型\n用UDP用户数据报传输——计算机加入新网络时可自动获取网络配置信息 主要过程：客户寻找DHCP服务器（广播）——服务器提供IP地址租用——客户接收租约——服务器确认租约——客户对IP地址续约——客户随时解除租约 客户未获得IP地址时 使用0.0.0.0 挑选地址时 使用ARP确保挑选的地址未被占用 使用前 客户用ARP检查 DHCP中继代理：给与客户主机直接相连的路由器配置DHCP服务器的IP地址 使其成为中继代理——将寻找的数据报单播给服务器 否则会丢弃客户的寻找DHCP服务器数据报 域名系统DNS 域名便于记忆 但需用IP地址进行访问 = DNS对域名解析成目标服务器的IP地址\n采用层次结构的命名树作为域名 使用分布式的域名系统==\u003e大多域名在本地解析 UDP封装 层次树状结构的域名系统 eg.···.三级域名.二级域名.顶级域名 不区分大小写 完整域名不超过255字符 特点：各级域名由上级域名管理 分类： 顶级域名TLD分类：国家 通用（com gov等） 反向域（IP地址反向解析为域名） 转换：分布在各地的域名服务器实现转换 根域名服务器 顶级域名服务器 权限域名服务器（二级三级等） 本地域名服务器（默认···） 权限域名服务器——管理某个区的域名 本地——代理作用 转发报文到其它域名服务器的等级结构 解析过程：递归查询 / 迭代查询 递归：主机-\u003e本地-\u003e根-\u003e顶级-\u003e权限-\u003e反向回 迭代：主机-\u003e本地-\u003e返回顶级地址 主机-\u003e顶级··· 主机-\u003e权限 主机到本地采用递归 其余采用迭代 高速缓存：存放最近查询过的域名与IP地址——为每个项目设置计时器 超时项删除——不需DNS查询 文件传送协议FTP C/S方式 可用ftp://balabal域名访问\n提供交互式访问 允许客户指明文件类型与格式 存取权限 屏蔽系统细节 适合在异构网络任意计算机间发送文件 工作原理： 客户与FTP服务器建立传送控制命令的TCP连接（FTP端口号20） （客户告知）服务器发起传送文件的TCP连接——主动模式（数据连接）（端口号21） 客户发起传送文件的TCP连接——被动模式（数据连接）（FTP随机端口号） 电子邮件 C/S\n组成：用户代理（email客户端软件） + 邮件服务器 + 电子邮件所需协议（包括发送与接收协议） 服务器向用户发送——POP3协议（其它为SMTP） 全部建立TCP连接 常用的发送协议——SMTP 常用的接受协议——POP3 SMTP 发送方周期性扫描邮件缓存 建立TCP连接（端口号25） 发送14条SMTP命令 接收方返回21种SMTP应答 针对发送方地址 接收方地址 邮件内容 结束符等都需交互 电子邮件发送 格式：信封+内容（首部+主体） SMTP只能传送ASCII码数据——MIME多用途因特网邮件扩展 发送方非ASCII内容经过MIME转译为ASCII后给SMTP 接收方同 MIME增加了邮件首部字段 内容格式 传送编码等 也应用于HTTP 接收 常用读取协议：POP邮局协议 IMAP因特网邮件访问协议——TCP 端口POP110\u0026IMAP143 IMAP4允许用户操控邮件服务器中的邮箱——联机协议 万维网email 使用HTTP协议与邮件服务器交互 万维网WWW 运行在因特网上的分布式应用 利用超链接将不同网站的网页链接\n使用统一资源定位符URL指明位置 格式：\u003c协议\u003e://\u003c主机\u003e:\u003c端口\u003e/\u003c路径\u003e 万维网文档：HTML+CSS+JavaScript——通过浏览器渲染 html超文本标记语言——网页结构与内容 css层叠样式表——审美 js脚本——控制网页行为 HTTP HTTP超文本传输协议——定义服务器怎样请求WWW文档 \u0026 服务器怎样传回浏览器 HTTP/1.0采用非持续链接 每次请求文件都需建立TCP 1.1采用持续连接 非流水线方式——收到一个请求的响应后才发送下一个请求 流水线：收到响应前 可不断发送请求 请求报文格式👇：（面向文本 每个字段都是ASCII码串 长度不确定） 报文格式：状态码202——正常 400——请求错误 cookie——记录用户信息（浏览器与www服务器建立TCP） 在服务器为用户生成唯一的cookie识别码 给浏览器返回识别码 else 缓存与代理服务器——web缓存（客户机 中间系统（代理服务器）上都可） 最近的请求与响应暂存在disk ","wordCount":"16719","inLanguage":"en","datePublished":"2024-11-13T20:11:31+08:00","dateModified":"2024-11-27T18:20:31+08:00","author":[{"@type":"Person","name":"Satti"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://Sattiluvcat.github.io/en/posts/notes/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"},"publisher":{"@type":"Organization","name":"Satti's Blog","logo":{"@type":"ImageObject","url":"https://Sattiluvcat.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://Sattiluvcat.github.io/en/ accesskey=h title="Satti's Blog (Alt + H)"><img src=https://Sattiluvcat.github.io/img/label1.jpg alt aria-label=logo height=35>Satti's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://Sattiluvcat.github.io/en/search/ title="🔍搜索 (Alt + /)" accesskey=/><span>🔍搜索</span></a></li><li><a href=https://Sattiluvcat.github.io/en/ title=🏠主页><span>🏠主页</span></a></li><li><a href=https://Sattiluvcat.github.io/en/tags title=📑标签><span>📑标签</span></a></li><li><a href=https://Sattiluvcat.github.io/en/lulu/ title=😽Lulu><span>😽Lulu</span></a></li><li><a href=https://Sattiluvcat.github.io/en/archives/ title=📅时间轴><span>📅时间轴</span></a></li><li><a href=https://Sattiluvcat.github.io/en/about/ title=😎关于><span>😎关于</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://Sattiluvcat.github.io/en/>Home</a>&nbsp;»&nbsp;<a href=https://Sattiluvcat.github.io/en/posts/>文章</a>&nbsp;»&nbsp;<a href=https://Sattiluvcat.github.io/en/posts/notes/>Notes📓</a></div><h1 class="post-title entry-hint-parent">计算机网络</h1><div class=post-description>关于计算机网络的基础知识笔记</div><div class=post-meta><span title='2024-11-13 20:11:31 +0800 +0800'>2024-11-13</span>&nbsp;·&nbsp;34 min&nbsp;·&nbsp;<span title='Last updated 2024-11-27 18:20:31 +0800 +0800'>Last updated on 2024-11-27</span>&nbsp;·&nbsp;Satti</div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e6%a6%82%e8%bf%b0 aria-label=概述>概述</a><ul><li><a href=#%e6%a6%82%e5%bf%b5 aria-label=概念>概念</a></li><li><a href=#%e7%bb%84%e6%88%90%e4%b8%8e%e5%8a%9f%e8%83%bd aria-label=组成与功能>组成与功能</a><ul><li><a href=#%e7%bb%84%e6%88%90 aria-label=组成>组成</a></li><li><a href=#%e5%8a%9f%e8%83%bd aria-label=功能>功能</a></li></ul></li><li><a href=#%e9%80%9a%e4%bf%a1%e6%96%b9%e5%bc%8f aria-label=通信方式>通信方式</a><ul><li><a href=#%e9%80%9a%e4%bf%a1%e6%96%b9%e5%bc%8f%e6%80%a7%e8%83%bd%e5%af%b9%e6%af%94 aria-label=通信方式性能对比>通信方式性能对比</a></li></ul></li><li><a href=#%e5%88%86%e7%b1%bb aria-label=分类>分类</a></li><li><a href=#%e6%80%a7%e8%83%bd%e6%8c%87%e6%a0%87 aria-label=性能指标>性能指标</a></li><li><a href=#%e5%88%86%e5%b1%82%e7%bb%93%e6%9e%84 aria-label=分层结构>分层结构</a><ul><li><a href=#%e5%8d%8f%e8%ae%ae aria-label=协议>协议</a></li></ul></li><li><a href=#osi%e5%8f%82%e8%80%83%e6%a8%a1%e5%9e%8b aria-label=OSI参考模型>OSI参考模型</a></li><li><a href=#tcpip%e6%a8%a1%e5%9e%8b aria-label=TCP/IP模型>TCP/IP模型</a></li></ul></li><li><a href=#%e7%89%a9%e7%90%86%e5%b1%82 aria-label=物理层>物理层</a><ul><li><a href=#%e9%80%9a%e4%bf%a1%e5%9f%ba%e7%a1%80%e5%9f%ba%e6%9c%ac%e6%a6%82%e5%bf%b5 aria-label=通信基础基本概念>通信基础基本概念</a></li><li><a href=#%e4%bf%a1%e9%81%93%e7%9a%84%e6%9e%81%e9%99%90%e5%ae%b9%e9%87%8f aria-label=信道的极限容量>信道的极限容量</a><ul><li><a href=#%e5%a5%88%e5%a5%8e%e6%96%af%e7%89%b9%e5%ae%9a%e7%90%86 aria-label=奈奎斯特定理>奈奎斯特定理</a></li><li><a href=#%e9%a6%99%e5%86%9c%e5%ae%9a%e7%90%86 aria-label=香农定理>香农定理</a></li></ul></li><li><a href=#%e7%bc%96%e7%a0%81%e4%b8%8e%e8%b0%83%e5%88%b6 aria-label=编码与调制>编码与调制</a><ul><li><a href=#%e6%a6%82%e5%bf%b5-1 aria-label=概念>概念</a></li><li><a href=#%e7%bc%96%e7%a0%81 aria-label=编码>编码</a><ul><li><a href=#%e6%96%b9%e6%b3%95 aria-label=方法>方法</a></li><li><a href=#%e7%89%b9%e7%82%b9 aria-label=特点>特点</a></li></ul></li><li><a href=#%e8%b0%83%e5%88%b6 aria-label=调制>调制</a><ul><li><a href=#%e8%b0%83%e5%88%b6%e6%96%b9%e6%b3%95 aria-label=调制方法>调制方法</a></li></ul></li></ul></li><li><a href=#%e4%bc%a0%e8%be%93%e4%bb%8b%e8%b4%a8 aria-label=传输介质>传输介质</a><ul><li><a href=#%e6%9c%89%e7%ba%bf%e5%b8%b8%e7%94%a8%e4%bc%a0%e8%be%93%e4%bb%8b%e8%b4%a8 aria-label=有线常用传输介质>有线常用传输介质</a></li><li><a href=#%e5%91%bd%e5%90%8d%e8%a7%84%e5%88%99 aria-label=命名规则>命名规则</a></li><li><a href=#%e6%97%a0%e7%ba%bf%e4%bc%a0%e8%be%93%e4%bb%8b%e8%b4%a8 aria-label=无线传输介质>无线传输介质</a></li><li><a href=#%e7%89%a9%e7%90%86%e5%b1%82%e6%8e%a5%e5%8f%a3%e7%89%b9%e6%80%a7 aria-label=物理层接口特性>物理层接口特性</a></li></ul></li><li><a href=#%e7%89%a9%e7%90%86%e5%b1%82%e8%ae%be%e5%a4%87 aria-label=物理层设备>物理层设备</a><ul><li><a href=#%e4%b8%ad%e7%bb%a7%e5%99%a8repeater aria-label=中继器Repeater>中继器Repeater</a></li><li><a href=#%e9%9b%86%e7%ba%bf%e5%99%a8hub aria-label=集线器hub>集线器hub</a></li></ul></li></ul></li><li><a href=#%e6%95%b0%e6%8d%ae%e9%93%be%e8%b7%af%e5%b1%82 aria-label=数据链路层>数据链路层</a><ul><li><a href=#%e6%a6%82%e8%bf%b0-1 aria-label=概述>概述</a><ul><li><a href=#%e6%a6%82%e5%bf%b5-2 aria-label=概念>概念</a></li><li><a href=#%e4%b8%89%e4%b8%aa%e9%97%ae%e9%a2%98 aria-label=三个问题>三个问题</a></li></ul></li><li><a href=#%e5%b0%81%e8%a3%85%e6%88%90%e5%b8%a7 aria-label=封装成帧>封装成帧</a><ul><li><a href=#%e5%b8%a7%e5%a4%b4%e5%b8%a7%e5%b0%be aria-label=帧头帧尾>帧头帧尾</a></li><li><a href=#%e9%80%8f%e6%98%8e%e4%bc%a0%e8%be%93 aria-label=透明传输>透明传输</a></li><li><a href=#%e5%b8%a7%e7%9a%84%e9%95%bf%e5%ba%a6 aria-label=帧的长度>帧的长度</a></li></ul></li><li><a href=#%e5%b7%ae%e9%94%99%e6%a3%80%e6%b5%8b aria-label=差错检测>差错检测</a><ul><li><a href=#%e7%9b%b8%e5%85%b3%e6%a6%82%e5%bf%b5 aria-label=相关概念>相关概念</a></li><li><a href=#%e6%a0%a1%e9%aa%8c%e6%96%b9%e6%b3%95 aria-label=校验方法>校验方法</a></li><li><a href=#%e7%89%b9%e7%82%b9-1 aria-label=特点>特点</a></li></ul></li><li><a href=#%e5%8f%af%e9%9d%a0%e4%bc%a0%e8%be%93 aria-label=可靠传输>可靠传输</a><ul><li><a href=#%e6%a6%82%e5%bf%b5-3 aria-label=概念>概念</a></li><li><a href=#%e5%ae%9e%e7%8e%b0%e6%9c%ba%e5%88%b6 aria-label=实现机制>实现机制</a><ul><li><a href=#%e5%81%9c%e6%ad%a2-%e7%ad%89%e5%be%85%e5%8d%8f%e8%ae%aesw aria-label=停止-等待协议SW>停止-等待协议SW</a></li><li><a href=#%e5%9b%9e%e9%80%80n%e5%b8%a7%e5%8d%8f%e8%ae%aegbn aria-label=回退N帧协议GBN>回退N帧协议GBN</a></li><li><a href=#%e9%80%89%e6%8b%a9%e9%87%8d%e4%bc%a0%e5%8d%8f%e8%ae%aesr aria-label=选择重传协议SR>选择重传协议SR</a></li></ul></li></ul></li><li><a href=#%e7%82%b9%e5%af%b9%e7%82%b9%e5%8d%8f%e8%ae%aeppp aria-label=点对点协议PPP>点对点协议PPP</a></li><li><a href=#%e5%aa%92%e4%bd%93%e6%8e%a5%e5%85%a5%e6%8e%a7%e5%88%b6mac aria-label=媒体接入控制MAC>媒体接入控制MAC</a><ul><li><a href=#%e9%9d%99%e6%80%81%e5%88%92%e5%88%86%e4%bf%a1%e9%81%93 aria-label=静态划分信道>静态划分信道</a></li><li><a href=#%e5%8a%a8%e6%80%81%e6%8e%a5%e5%85%a5%e6%8e%a7%e5%88%b6%e9%9a%8f%e6%9c%ba%e6%8e%a5%e5%85%a5 aria-label=动态接入控制——随机接入>动态接入控制——随机接入</a><ul><li><a href=#csmacd aria-label=CSMA/CD>CSMA/CD</a></li><li><a href=#csmaca aria-label=CSMA/CA>CSMA/CA</a></li></ul></li></ul></li><li><a href=#mac%e5%9c%b0%e5%9d%80-ip%e5%9c%b0%e5%9d%80-arp%e5%8d%8f%e8%ae%ae aria-label="MAC地址 IP地址 ARP协议">MAC地址 IP地址 ARP协议</a><ul><li><a href=#mac%e5%9c%b0%e5%9d%80 aria-label=MAC地址>MAC地址</a></li><li><a href=#ip%e5%9c%b0%e5%9d%80%e4%bd%9c%e7%94%a8%e7%bd%91%e7%bb%9c%e5%b1%82 aria-label=IP地址作用（网络层）>IP地址作用（网络层）</a></li><li><a href=#arp%e5%8d%8f%e8%ae%ae aria-label=ARP协议>ARP协议</a></li></ul></li><li><a href=#%e9%9b%86%e7%ba%bf%e5%99%a8%e4%b8%8e%e4%ba%a4%e6%8d%a2%e6%9c%ba aria-label=集线器与交换机>集线器与交换机</a></li><li><a href=#%e4%bb%a5%e5%a4%aa%e7%bd%91%e4%ba%a4%e6%8d%a2%e6%9c%ba%e8%87%aa%e5%ad%a6%e4%b9%a0%e8%bd%ac%e5%8f%91%e5%b8%a7 aria-label=以太网交换机自学习&转发帧>以太网交换机自学习&转发帧</a></li><li><a href=#%e4%bb%a5%e5%a4%aa%e7%bd%91%e4%ba%a4%e6%8d%a2%e6%9c%ba%e7%94%9f%e6%88%90%e6%a0%91%e5%8d%8f%e8%ae%aestp aria-label=以太网交换机生成树协议STP>以太网交换机生成树协议STP</a></li><li><a href=#vlan%e8%99%9a%e6%8b%9f%e5%b1%80%e5%9f%9f%e7%bd%91 aria-label=VLAN虚拟局域网>VLAN虚拟局域网</a><ul><li><a href=#vlan%e5%ae%9e%e7%8e%b0%e6%9c%ba%e5%88%b6 aria-label=VLAN实现机制>VLAN实现机制</a></li></ul></li></ul></li><li><a href=#%e7%bd%91%e7%bb%9c%e5%b1%82 aria-label=网络层>网络层</a><ul><li><a href=#%e6%8f%90%e4%be%9b%e7%9a%84%e6%9c%8d%e5%8a%a1 aria-label=提供的服务>提供的服务</a><ul><li><a href=#%e9%9d%a2%e5%90%91%e8%bf%9e%e6%8e%a5%e7%9a%84%e8%99%9a%e7%94%b5%e8%b7%af%e6%9c%8d%e5%8a%a1 aria-label=面向连接的虚电路服务>面向连接的虚电路服务</a></li><li><a href=#%e6%97%a0%e8%bf%9e%e6%8e%a5%e7%9a%84%e6%95%b0%e6%8d%ae%e6%8a%a5%e6%9c%8d%e5%8a%a1 aria-label=无连接的数据报服务>无连接的数据报服务</a></li></ul></li><li><a href=#ipv4%e5%9c%b0%e5%9d%80 aria-label=IPv4地址>IPv4地址</a><ul><li><a href=#%e6%a6%82%e8%bf%b0-2 aria-label=概述>概述</a></li><li><a href=#%e5%88%86%e7%b1%bb%e7%bc%96%e5%9d%80 aria-label=分类编址>分类编址</a></li><li><a href=#%e5%88%92%e5%88%86%e5%ad%90%e7%bd%91 aria-label=划分子网>划分子网</a></li><li><a href=#%e6%97%a0%e5%88%86%e7%b1%bb%e7%bc%96%e5%9d%80 aria-label=无分类编址>无分类编址</a></li><li><a href=#ipv4%e5%9c%b0%e5%9d%80%e7%9a%84%e5%ba%94%e7%94%a8%e8%a7%84%e5%88%92 aria-label=IPv4地址的应用规划>IPv4地址的应用规划</a></li></ul></li><li><a href=#ip%e6%95%b0%e6%8d%ae%e6%8a%a5%e7%9a%84%e8%bd%ac%e5%8f%91%e4%b8%8e%e5%8f%91%e9%80%81 aria-label=IP数据报的转发与发送>IP数据报的转发与发送</a></li><li><a href=#%e9%9d%99%e6%80%81%e8%b7%af%e7%94%b1%e9%85%8d%e7%bd%ae%e5%8f%8a%e8%b7%af%e7%94%b1%e7%8e%af%e8%b7%af%e9%97%ae%e9%a2%98 aria-label=静态路由配置及路由环路问题>静态路由配置及路由环路问题</a><ul><li><a href=#%e7%89%b9%e6%ae%8a%e6%a6%82%e5%bf%b5 aria-label=特殊概念>特殊概念</a></li><li><a href=#%e5%8f%af%e8%83%bd%e7%9a%84%e8%b7%af%e7%94%b1%e7%8e%af%e8%b7%af aria-label=可能的路由环路>可能的路由环路</a></li></ul></li><li><a href=#%e8%b7%af%e7%94%b1%e9%80%89%e6%8b%a9%e5%8d%8f%e8%ae%ae aria-label=路由选择协议>路由选择协议</a><ul><li><a href=#%e6%a6%82%e8%bf%b0-3 aria-label=概述>概述</a></li><li><a href=#rip aria-label=RIP>RIP</a></li><li><a href=#ospf aria-label=OSPF>OSPF</a></li><li><a href=#bgp aria-label=BGP>BGP</a></li></ul></li><li><a href=#ipv4%e6%95%b0%e6%8d%ae%e6%8a%a5%e9%a6%96%e9%83%a8%e6%a0%bc%e5%bc%8f aria-label=IPv4数据报首部格式>IPv4数据报首部格式</a></li><li><a href=#%e7%bd%91%e9%99%85%e6%8e%a7%e5%88%b6%e6%8a%a5%e6%96%87%e5%8d%8f%e8%ae%aeicmp aria-label=网际控制报文协议ICMP>网际控制报文协议ICMP</a><ul><li><a href=#%e5%b7%ae%e9%94%99%e6%8a%a5%e5%91%8a%e6%8a%a5%e6%96%87 aria-label=差错报告报文>差错报告报文</a></li><li><a href=#%e8%af%a2%e9%97%ae%e6%8a%a5%e6%96%87 aria-label=询问报文>询问报文</a></li><li><a href=#%e5%ba%94%e7%94%a8 aria-label=应用>应用</a></li></ul></li><li><a href=#%e8%99%9a%e6%8b%9f%e4%b8%93%e7%94%a8%e7%bd%91vpn%e7%bd%91%e7%bb%9c%e5%9c%b0%e5%9d%80%e8%bd%ac%e6%8d%a2nat aria-label=虚拟专用网VPN网络地址转换NAT>虚拟专用网VPN网络地址转换NAT</a><ul><li><a href=#vpn-virtual-private-network aria-label="VPN virtual private network">VPN virtual private network</a></li><li><a href=#nat-network-address-translation aria-label="NAT network address translation">NAT network address translation</a></li></ul></li></ul></li><li><a href=#%e8%bf%90%e8%be%93%e5%b1%82 aria-label=运输层>运输层</a><ul><li><a href=#%e8%bf%90%e8%be%93%e5%b1%82%e6%a6%82%e8%bf%b0 aria-label=运输层概述>运输层概述</a></li><li><a href=#%e8%bf%90%e8%be%93%e5%b1%82%e7%ab%af%e5%8f%a3%e5%8f%b7-%e5%a4%8d%e7%94%a8-%e5%88%86%e7%94%a8 aria-label="运输层端口号 复用 分用">运输层端口号 复用 分用</a><ul><li><a href=#%e7%ab%af%e5%8f%a3%e5%8f%b7 aria-label=端口号>端口号</a></li><li><a href=#%e5%8f%91%e9%80%81%e6%96%b9%e5%a4%8d%e7%94%a8-%e6%8e%a5%e6%94%b6%e6%96%b9%e5%88%86%e7%94%a8 aria-label="发送方复用 接收方分用">发送方复用 接收方分用</a></li></ul></li><li><a href=#udp-tcp%e5%af%b9%e6%af%94 aria-label="UDP TCP对比">UDP TCP对比</a></li><li><a href=#tcp%e6%b5%81%e9%87%8f%e6%8e%a7%e5%88%b6 aria-label=TCP流量控制>TCP流量控制</a></li><li><a href=#tcp%e6%8b%a5%e5%a1%9e%e6%8e%a7%e5%88%b6 aria-label=TCP拥塞控制>TCP拥塞控制</a><ul><li><a href=#%e6%96%b9%e6%b3%95-1 aria-label=方法>方法</a></li></ul></li><li><a href=#tcp%e8%b6%85%e6%97%b6%e9%87%8d%e4%bc%a0%e6%97%b6%e9%97%b4%e7%9a%84%e9%80%89%e6%8b%a9 aria-label=TCP超时重传时间的选择>TCP超时重传时间的选择</a></li><li><a href=#tcp%e5%8f%af%e9%9d%a0%e4%bc%a0%e8%be%93%e5%ae%9e%e7%8e%b0 aria-label=TCP可靠传输实现>TCP可靠传输实现</a></li><li><a href=#tcp%e8%bf%90%e8%be%93%e8%bf%9e%e6%8e%a5%e7%ae%a1%e7%90%86%e8%bf%9e%e6%8e%a5%e5%bb%ba%e7%ab%8b aria-label=TCP运输连接管理——连接建立>TCP运输连接管理——连接建立</a><ul><li><a href=#%e5%85%b7%e4%bd%93%e8%bf%87%e7%a8%8b aria-label=具体过程>具体过程</a></li></ul></li><li><a href=#%e8%bf%9e%e6%8e%a5%e9%87%8a%e6%94%be aria-label=连接释放>连接释放</a></li><li><a href=#tcp%e6%8a%a5%e6%96%87%e6%ae%b5%e9%a6%96%e9%83%a8%e6%a0%bc%e5%bc%8f aria-label=TCP报文段首部格式>TCP报文段首部格式</a></li></ul></li><li><a href=#%e5%ba%94%e7%94%a8%e5%b1%82 aria-label=应用层>应用层</a><ul><li><a href=#%e6%a6%82%e8%bf%b0-4 aria-label=概述>概述</a></li><li><a href=#%e5%ae%a2%e6%88%b7%e6%9c%8d%e5%8a%a1%e5%99%a8%e6%96%b9%e5%bc%8f%e4%b8%8e%e5%af%b9%e7%ad%89%e6%96%b9%e5%bc%8f aria-label=客户/服务器方式与对等方式>客户/服务器方式与对等方式</a><ul><li><a href=#cs aria-label=C/S>C/S</a></li><li><a href=#p2p aria-label=P2P>P2P</a></li></ul></li><li><a href=#%e5%8a%a8%e6%80%81%e4%b8%bb%e6%9c%ba%e9%85%8d%e7%bd%ae%e5%8d%8f%e8%ae%aedhcp aria-label=动态主机配置协议DHCP>动态主机配置协议DHCP</a></li><li><a href=#%e5%9f%9f%e5%90%8d%e7%b3%bb%e7%bb%9fdns aria-label=域名系统DNS>域名系统DNS</a><ul><li><a href=#%e5%b1%82%e6%ac%a1%e6%a0%91%e7%8a%b6%e7%bb%93%e6%9e%84%e7%9a%84%e5%9f%9f%e5%90%8d%e7%b3%bb%e7%bb%9f aria-label=层次树状结构的域名系统>层次树状结构的域名系统</a></li></ul></li><li><a href=#%e6%96%87%e4%bb%b6%e4%bc%a0%e9%80%81%e5%8d%8f%e8%ae%aeftp aria-label=文件传送协议FTP>文件传送协议FTP</a></li><li><a href=#%e7%94%b5%e5%ad%90%e9%82%ae%e4%bb%b6 aria-label=电子邮件>电子邮件</a><ul><li><a href=#smtp aria-label=SMTP>SMTP</a></li><li><a href=#%e7%94%b5%e5%ad%90%e9%82%ae%e4%bb%b6%e5%8f%91%e9%80%81 aria-label=电子邮件发送>电子邮件发送</a></li><li><a href=#%e6%8e%a5%e6%94%b6 aria-label=接收>接收</a></li><li><a href=#%e4%b8%87%e7%bb%b4%e7%bd%91email aria-label=万维网email>万维网email</a></li></ul></li><li><a href=#%e4%b8%87%e7%bb%b4%e7%bd%91www aria-label=万维网WWW>万维网WWW</a><ul><li><a href=#http aria-label=HTTP>HTTP</a></li><li><a href=#else aria-label=else>else</a></li></ul></li></ul></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><p> </p><p> </p><a href=https://www.bilibili.com/video/BV1c4411d7jb/ style=color:#000;text-decoration:underline>所有图片来自：计算机网络微课堂（有字幕无背景音乐版）</a><h2 id=概述>概述<a hidden class=anchor aria-hidden=true href=#概述>#</a></h2><h3 id=概念>概念<a hidden class=anchor aria-hidden=true href=#概念>#</a></h3><ol><li>计算机网络 由结点node&链路link构成<ul><li>计算机网络可由交换机连接</li><li>多个计算机网络可由路由器连接成互连网（协议不定）</li><li>全球范围的互连网 = 互联网（统一采用TCP/IP协议）<ul><li>ISP 互联网服务提供商</li></ul></li></ul></li></ol><h3 id=组成与功能>组成与功能<a hidden class=anchor aria-hidden=true href=#组成与功能>#</a></h3><h4 id=组成>组成<a hidden class=anchor aria-hidden=true href=#组成>#</a></h4><ol><li>硬件+软件+协议<ul><li>硬件：主机（end system端系统） 通信设备balabal</li><li>协议由硬件软件共同实现</li></ul></li><li>边缘部分+核心部分<ul><li>边缘 = 直接为用户服务</li></ul></li><li>（从逻辑功能）资源子网+通信子网<ul><li>资源子网 主要是主机</li></ul></li></ol><h4 id=功能>功能<a hidden class=anchor aria-hidden=true href=#功能>#</a></h4><ol><li>数据通信（最基本最重要）</li><li>资源共享——硬件 软件 数据</li><li>分布式处理——eg.复杂任务多计算机处理</li><li>提高可靠性——eg.互为替代机</li><li>负载均衡</li></ol><h3 id=通信方式>通信方式<a hidden class=anchor aria-hidden=true href=#通信方式>#</a></h3><ol><li>电路交换eg.电话 通信时始终占用端到端线路资源 but 释放/建立连接需要额外时间开销 利用率低</li><li>报文交换eg.电报 无需提前建立连接 存储转发（通信线路可灵活分配） 线路利用率高 支持差错控制 but 报文不定长 不利管理 + 长报文存储转发时间、缓存开销大 + 长报文易出错<ul><li>存储转发 = 先存储后转发</li></ul></li><li>分组交换（现代网络采用）<ul><li>定长——方便存储转发管理 + 转发时间更少（相对报文交换）+不易出错</li><li>控制信息占比增加（报文）+ 存在存储转发时延（电路交换）+ 分成多个分组 传输过程中可能出错</li></ul></li><li>虚电路交换：虚拟电路建立连接 + 通信双方不独占线路</li></ol><h4 id=通信方式性能对比>通信方式性能对比<a hidden class=anchor aria-hidden=true href=#通信方式性能对比>#</a></h4><ol><li>电路交换 建立连接后再进行数据传送 最后连接释放</li><li>报文交换 中间节点需接收完整报文后再进行解析与转发</li><li>分组交换 分组进行报文交换
<img loading=lazy src=image.png alt="alt text"></li></ol><h3 id=分类>分类<a hidden class=anchor aria-hidden=true href=#分类>#</a></h3><ol><li>分布范围 广域网WAN + 城域网MAN + 局域网LAN + 个域网PAN<ul><li>WAN多采用以太网 MAN 几乎全部采用以太网技术（城域网多归为局域网）<ul><li>局域网可通过路由器接入广域网
<img loading=lazy src=image-1.png alt="alt text"></li></ul></li><li>个域网 eg.蓝牙 Zigbee等设备</li></ul></li><li>传输技术：广播式网络 & 点对点网络</li><li>拓扑结构：<ul><li>总线形 广播式 存在总线争用问题</li><li>环形结构 广播式 令牌顺环形传递 有令牌才发数据 eg.令牌环网</li><li>星形结构 中央设备实现数据点对点传输 eg.以太网交换机连接的设备</li><li>网状结构 数据通过各中间节点逐一存储转发 eg.由many路由器构建的广域网</li></ul></li><li>使用者：公用网 & 专用网</li><li>传输介质：有线 & 无线</li></ol><h3 id=性能指标>性能指标<a hidden class=anchor aria-hidden=true href=#性能指标>#</a></h3><ul><li>信道：向某一方向发送信息的通道（一条发送信道+一条接受信道 = 一个通信线路）</li></ul><ol><li>速率：连接到网络上的节点在信道上传输数据的速率<ul><li>常用单位：bit/s bps（也会用B 1B=8b）</li></ul></li><li>带宽：某信道能传送的最高数据率</li><li>吞吐量：单位时间通过某网络（or信道/接口）的实际数据量</li><li>时延：数据从网络/链路的一端到另一端所需的时间<ul><li>发送时延 = 传输时延</li><li>传播时延：电磁波在信道中传播花的时间</li></ul></li><li>时延带宽积 = 传播时延 x 带宽</li><li>往返时延RTT = 发送方<strong>发送完</strong>数据的时间到<strong>完全接收</strong>确认信息的时间</li><li>信道利用率 = 有数据通过的时间/利用信道的总时间<ul><li>利用率过低 = 浪费带宽 过高 = 易网络拥塞</li></ul></li></ol><h3 id=分层结构>分层结构<a hidden class=anchor aria-hidden=true href=#分层结构>#</a></h3><blockquote><p>同个功能可由不同层实现 结构不固定</p></blockquote><ol><li>常见计网体系机构： OSI参考模型 + TCP/IP模型 + 五层结构（教学</li><li>分层结构概念：计网的各层及其协议的集合</li><li>概念：<ul><li><strong>实体</strong>：第n层的活动元素（硬件 软件） = 第n层实体<ul><li>不同机器上同一层为对等层 同层实体为对等实体</li></ul></li><li>协议（网络协议Network Protocol）：控制对等实体间通信规则的集合 <strong>水平</strong></li><li>服务 下层为紧邻的上层提供的功能调用</li><li>接口（服务访问点SAP） 实体通过接口请求下一层实体的服务</li></ul></li></ol><h4 id=协议>协议<a hidden class=anchor aria-hidden=true href=#协议>#</a></h4><ol><li>数据传输过程：协议添加在首部or尾部 eg.YSCS协议（压缩传输）<ul><li>协议数据单元PDU=服务数据单元SDU + 协议控制信息PCI &ndash;> 整体下一层的SDU
<img loading=lazy src=image-15.png alt="alt text"></li></ul></li><li>协议三要素：语法 语义 同步<ul><li>同步（时序）——时间实现顺序的详细说明</li></ul></li></ol><h3 id=osi参考模型>OSI参考模型<a hidden class=anchor aria-hidden=true href=#osi参考模型>#</a></h3><ol><li>分层：（如下）
<img loading=lazy src=image-2.png alt="alt text"></li><li>分层任务：<ul><li>第0层：物理传输媒体</li><li>物理层：相邻节点间<strong>比特</strong>的传输</li><li>数据链路层：<strong>差错控制</strong> + 流量控制（协调两节点的速率）（以<strong>帧</strong>为单位进行数据传输）</li><li>网络层（把分组从源节点转发到目标节点）（以<strong>分组</strong>为单位进行数据传输）<ul><li><strong>路由选择</strong>：决定分组到目的节点的最佳路径</li><li>分组转发：选择合适端口转发分组</li><li>网际互连：异构网络互联（不同构造的网络）</li><li>其他功能 包括差错控制 流量控制…</li></ul></li><li>传输层（端到端通信 端即端口 = 进程到进程）（以<strong>报文段segment</strong>为单位）<ul><li><strong>复用与分用</strong> 几个高层实体复用一条底层连接 在接收端分用</li><li>其他功能 包括差错控制 流量控制…</li></ul></li><li>会话层（管理进程间会话）</li><li>表示层（解决不同主机上信息表示不一致的问题</li><li>应用层（实现特定的网络应用）（以<strong>报文</strong>为单位进行数据传输）</li></ul></li></ol><h3 id=tcpip模型>TCP/IP模型<a hidden class=anchor aria-hidden=true href=#tcpip模型>#</a></h3><ol><li>分层：网络接口层（≈物理层+数据链路层）+ 网络层 + 传输层 + 应用层（≈else层）</li><li>原因：<ul><li>表示层&会话层可以不用（需要时可在应用层进行处理）</li><li>网络层下主要是硬件部分（厂商可自由发挥so合并）</li></ul></li><li>特点：<ul><li>网络层不进行差错控制 only保证最大能力交付</li><li>传输层负责数据正确可靠性</li></ul></li></ol><h2 id=物理层>物理层<a hidden class=anchor aria-hidden=true href=#物理层>#</a></h2><blockquote><p>不隔离广播域 冲突域</p></blockquote><h3 id=通信基础基本概念>通信基础基本概念<a hidden class=anchor aria-hidden=true href=#通信基础基本概念>#</a></h3><ol><li>综合：<ul><li>信源发送信号（数据的载体）到信宿</li><li>信号：数字信号 or 模拟信号<ul><li>信号值离散 or 连续</li></ul></li><li>码元：每个信号就是一个码元<ul><li>信号周期 = 码元宽度</li><li>若一个码元可能有4种状态 = 4进制码元 = 一个码元携带2bit数据</li></ul></li><li>速率：波特率 + 比特率<ul><li>波特率：码元/秒 = 波特Baud</li><li>比特率：比特/秒</li></ul></li></ul></li></ol><h3 id=信道的极限容量>信道的极限容量<a hidden class=anchor aria-hidden=true href=#信道的极限容量>#</a></h3><ol><li>噪声：对信号产生干扰</li></ol><h4 id=奈奎斯特定理>奈奎斯特定理<a hidden class=anchor aria-hidden=true href=#奈奎斯特定理>#</a></h4><blockquote><p>无噪声（理想）低通信道</p></blockquote><ol><li>极限<strong>波特</strong>率 = <code>2W</code>（单位：<strong>波特</strong>）<ul><li><code>W</code>为信道频率带宽（单位：Hz）</li></ul></li><li>说明：<ul><li>若波特率过高 = 导致码间串扰（接收方无法识别码元）</li></ul></li><li>缺点：并未对码元可以携带多少比特做解释</li></ol><h4 id=香农定理>香农定理<a hidden class=anchor aria-hidden=true href=#香农定理>#</a></h4><blockquote><p>有噪声 带宽有限</p></blockquote><ol><li>极限<strong>比特</strong>率 = $Wlog_2(1+S/N)$（此处信噪比无单位）<ul><li>$S/N$ 信噪比 = 信号<strong>功率</strong>/噪声<strong>功率</strong><ul><li>以<code>dB</code>为单位表示为$10log_{10}S/N$</li></ul></li></ul></li><li>结合Nyquist可知，带宽、信噪比确定的信道上，一个码元可携带的比特数有上限</li></ol><h3 id=编码与调制>编码与调制<a hidden class=anchor aria-hidden=true href=#编码与调制>#</a></h3><h4 id=概念-1>概念<a hidden class=anchor aria-hidden=true href=#概念-1>#</a></h4><ol><li>信源&ndash;>变换器&ndash;>信道&ndash;>反变换器&ndash;>信宿<ul><li>变换器：将二进制数据转换为信号<ul><li>转换为数字信号 = 编码</li><li>转换为模拟信号 = 调制（eg.光猫）</li></ul></li><li>反变换器：将信号转换为二进制数据<ul><li>数字信号转换 = 解码</li><li>模拟信号转换 = 解调</li></ul></li></ul></li></ol><h4 id=编码>编码<a hidden class=anchor aria-hidden=true href=#编码>#</a></h4><h5 id=方法>方法<a hidden class=anchor aria-hidden=true href=#方法>#</a></h5><p><img loading=lazy src=image-3.png alt="alt text"></p><ol><li>不归零编码NRZ——低电平（表示）0，高电平（表示）1，中间不跳变</li><li>归零编码RZ——低电平（表示）0，高电平（表示）1，中间归零</li><li>反向非归零NRZI——遇0跳变，遇1不跳变，中间不跳变（看起点决定0/1）</li><li>曼彻斯特编码——遇0上/跳，遇1下/上跳，中间会跳变（看中间）</li><li>差分曼彻斯特——遇0跳变，遇1不跳变，中间会跳变（看起点）</li></ol><h5 id=特点>特点<a hidden class=anchor aria-hidden=true href=#特点>#</a></h5><ol><li>自同步能力——信源信宿可以根据信号实现节奏同步（知道断点在哪）<ul><li>1无 3增加冗余位时可支持自同步</li></ul></li><li>浪费带宽——每个信号（0/1）中间需要变化时就会浪费带宽<ul><li>2 4 5浪费 3浪费一点</li></ul></li><li>抗干扰能力<ul><li>1 2 3弱</li></ul></li></ol><h4 id=调制>调制<a hidden class=anchor aria-hidden=true href=#调制>#</a></h4><h5 id=调制方法>调制方法<a hidden class=anchor aria-hidden=true href=#调制方法>#</a></h5><p><img loading=lazy src=image-4.png alt="alt text"></p><ol><li>调幅AM幅移键控——调整正弦波振幅</li><li>调频FM频移键控——调整正弦波频率</li><li>调相PM相移键控——调整正弦波相位</li><li>正交幅度调制QAM——m种幅值 n种相位复合<ul><li><code>QAM-32</code>指调制出32种信号 = 每个码元可以携带32bit信号</li></ul></li></ol><h3 id=传输介质>传输介质<a hidden class=anchor aria-hidden=true href=#传输介质>#</a></h3><h4 id=有线常用传输介质>有线常用传输介质<a hidden class=anchor aria-hidden=true href=#有线常用传输介质>#</a></h4><ol><li>双绞线：两导线绞合而成 有屏蔽层 = 屏蔽双绞线STP 无屏蔽层 / 非屏蔽双绞线UTP<ul><li>抗干扰能力较好（绞合&屏蔽层）</li><li>局域网网线</li></ul></li><li>同轴电缆：内导体&外导体屏蔽层<ul><li>内导体越粗 电阻越低 信号衰减越少</li><li>抗干扰能力好（屏蔽层）</li><li>早期局域网</li></ul></li><li>光纤：纤芯（高折射率）&包层（低折射率）= 单模光纤（一条光线传输）/ 多模光纤（多条光线）<ul><li>单模光纤适合长距离 多模光纤适合短距离</li><li>抗干扰能力非常好 信号传输损耗小（中继器少）</li></ul></li></ol><h4 id=命名规则>命名规则<a hidden class=anchor aria-hidden=true href=#命名规则>#</a></h4><blockquote><p>以太网For有线传输介质</p></blockquote><ul><li>速度+Base+介质信息<ul><li>Baseband基带传输 传输数字信号采用曼彻斯特编号</li></ul></li></ul><h4 id=无线传输介质>无线传输介质<a hidden class=anchor aria-hidden=true href=#无线传输介质>#</a></h4><ol><li>无线电波（长波）——穿透能力强（绕射性好） 传输距离长 信号指向性弱<ul><li>手机信号 WiFi</li></ul></li><li>微波通信（短波）——频率带宽高 信号指向性强 保密性差</li></ol><h4 id=物理层接口特性>物理层接口特性<a hidden class=anchor aria-hidden=true href=#物理层接口特性>#</a></h4><ol><li>机械特性 + 电气特性 + 功能特性 + 过程（规程）特性</li></ol><h3 id=物理层设备>物理层设备<a hidden class=anchor aria-hidden=true href=#物理层设备>#</a></h3><h4 id=中继器repeater>中继器Repeater<a hidden class=anchor aria-hidden=true href=#中继器repeater>#</a></h4><blockquote><p>传输距离太长 数字信号会失真</p></blockquote><ol><li>only两端口 一个接收信号 &ndash;> 整形再生 &ndash;> 另一端口</li><li>仅支持半双工通信（一次只能处理一个方向）</li><li>两个端口对应两个网段</li></ol><h4 id=集线器hub>集线器hub<a hidden class=anchor aria-hidden=true href=#集线器hub>#</a></h4><blockquote><p>多端口中继器</p></blockquote><ol><li>各节点不可同时发送数据</li><li>冲突域：若两主机同时发送数据会冲突 则其处于同个冲突域<ul><li>在发数据前需信道争用</li></ul></li></ol><ul><li>都不能无限串接</li></ul><h2 id=数据链路层>数据链路层<a hidden class=anchor aria-hidden=true href=#数据链路层>#</a></h2><blockquote><p>隔离冲突域（eg.网桥）</p></blockquote><h3 id=概述-1>概述<a hidden class=anchor aria-hidden=true href=#概述-1>#</a></h3><h4 id=概念-2>概念<a hidden class=anchor aria-hidden=true href=#概念-2>#</a></h4><ol><li>链路Link：从一个结点到相邻结点的一段物理线路</li><li>数据链路：链路 + 实现通信协议的软硬件</li><li>以<strong>帧</strong>为单位传输处理数据</li></ol><h4 id=三个问题>三个问题<a hidden class=anchor aria-hidden=true href=#三个问题>#</a></h4><ol><li>封装成帧：为网络层协议数据单元添加帧头帧尾（成为帧）
<img loading=lazy src=image-5.png alt="alt text"></li><li>差错检测：发送方将<strong>检错码</strong>封装在帧尾 检测是否有误码<ul><li>检错码根据发送内容 检错算法而不同</li></ul></li><li>可靠传输：即使检出错误，发送方也能保证接收方得到正确信息</li></ol><h3 id=封装成帧>封装成帧<a hidden class=anchor aria-hidden=true href=#封装成帧>#</a></h3><h4 id=帧头帧尾>帧头帧尾<a hidden class=anchor aria-hidden=true href=#帧头帧尾>#</a></h4><ol><li>作用：帧定界 + ···<ul><li>让接受层确定一帧的起始点</li><li>有的协议不通过帧头帧尾提供帧定界功能 以太网V2的MAC帧通过帧间间隔实现</li></ul></li></ol><h4 id=透明传输>透明传输<a hidden class=anchor aria-hidden=true href=#透明传输>#</a></h4><ol><li>定义：数据链路层对上层交付的传输数据没有任何<strong>限制</strong></li><li>实现：面向字节的物理链路使用字节填充方法实现 & 面向比特的物理链路使用比特填充方法实现<ul><li>在特殊字符前添加转义字符</li><li>比特流中可采用零比特填充法</li></ul></li></ol><h4 id=帧的长度>帧的长度<a hidden class=anchor aria-hidden=true href=#帧的长度>#</a></h4><ol><li>为提高运输效率 应使帧的数据部分长些</li><li>每种数据链路层协议都规定了👆的长度上限MTU（最大传送单元Maximum Transfer Unit）</li></ol><h3 id=差错检测>差错检测<a hidden class=anchor aria-hidden=true href=#差错检测>#</a></h3><h4 id=相关概念>相关概念<a hidden class=anchor aria-hidden=true href=#相关概念>#</a></h4><ol><li>比特差错：比特在传输过程中 0可能变为1···</li><li>误码率BER：一段时间内 传输错的比特占总比特数的比例</li></ol><h4 id=校验方法>校验方法<a hidden class=anchor aria-hidden=true href=#校验方法>#</a></h4><ol><li>奇/偶校验：添加1位奇偶校验位 使所有数据中（包括其自己）1的个数为奇/偶<ul><li>漏检率高</li></ul></li><li>循环冗余校验CRC：约定一个生成多项式 发送方基于数据与多项式计算得冗余码 接收方通过其计算<ul><li>生成多项式各项系数构成比特串eg.$1<em>x^4+0</em>x^3+1<em>x^2+1</em>x^1+0*x^0$ 对应$10110$
<img loading=lazy src=image-6.png alt="alt text"></li></ul></li></ol><h4 id=特点-1>特点<a hidden class=anchor aria-hidden=true href=#特点-1>#</a></h4><ol><li>只能检测 不能定位（定位开销大 不采用）</li><li>CRC硬件实现容易</li></ol><h3 id=可靠传输>可靠传输<a hidden class=anchor aria-hidden=true href=#可靠传输>#</a></h3><h4 id=概念-3>概念<a hidden class=anchor aria-hidden=true href=#概念-3>#</a></h4><ol><li>传输差错包括比特差错 <em>分组丢失 分组失序 分组重复（一般出现在数据链路层上层）</em>···</li><li>可靠传输服务各层均可选择实现 不局限于此层</li></ol><h4 id=实现机制>实现机制<a hidden class=anchor aria-hidden=true href=#实现机制>#</a></h4><blockquote><p>可被应用到各层协议中</p></blockquote><h5 id=停止-等待协议sw>停止-等待协议SW<a hidden class=anchor aria-hidden=true href=#停止-等待协议sw>#</a></h5><blockquote><p>属于自动请求重传ARQ Automatic Repeat reQuest</p></blockquote><ol><li>基本过程：发送方发送分组&ndash;>接收方校验正确给发送方发送ACK接收信号&ndash;>接收方再次发送。若校验错误 接收方返回NAK否认信号 发送方重传</li><li>改进：<ul><li>超时重传：设定超时计时器 若到达重传时间发送方未接收到信号则重传<ul><li>设定重传时间略大于平均往返时间</li><li>数据链路层点对点往返时间较为确定——重传时间较好设定</li></ul></li><li>设置编号：避免分组重复（接收方返回信号丢失后重传原数据）<ul><li>只需保证与上次发送的数据不同——一个比特即可</li></ul></li><li>（避免确认分组迟到）接收端返回信号进行编号——与发送方的编号一致<ul><li>数据链路层一般不会出现</li></ul></li></ul></li><li>信道利用率$U$：往返时延$RTT$远大于数据帧发送时延$T_D$时，信道利用率非常低
<img loading=lazy src=image-8.png alt="alt text"></li></ol><h5 id=回退n帧协议gbn>回退N帧协议GBN<a hidden class=anchor aria-hidden=true href=#回退n帧协议gbn>#</a></h5><blockquote><p>又名滑动窗口协议</p></blockquote><ol><li>基本过程：发送方设置发送窗口，同时将窗口内的所有分组发送（需编序号）&ndash;>接收方接收到后发送成功接收信息&ndash;>接收窗口滑动按序号接收&ndash;>发送方收到确认后 发送窗口向前滑动<ul><li>发送窗口尺寸的取值范围：<strong>小于等于序号</strong>（eg.0~7 则最大为7）<ul><li>若等于8 接收方<strong>无法分辨新旧数据分组</strong></li></ul></li><li>接收方窗口尺寸=1
<img loading=lazy src=image-7.png alt="alt text"></li></ul></li><li>差错：发送的信息中某分组错误，整个窗口的数据由于不能匹配被接收方丢弃&ndash;>发送方也重传未被接收的帧eg.从有误码的帧开始（发生超时重传时）==>回退N帧</li><li>优化：<ul><li>累计确认：接收方可以在收到几个数据分组后对按序到达的最后一个分组发送确认$ACK_n$，表示n前的都接收了</li><li>发送方收到多个重复确认时 可在重传计时器超时前开始重传</li></ul></li></ol><h5 id=选择重传协议sr>选择重传协议SR<a hidden class=anchor aria-hidden=true href=#选择重传协议sr>#</a></h5><blockquote><p>不能再进行累计确认 需要逐一确认 实现发送方仅重传错误分组</p></blockquote><ol><li>基本要求：发送窗口尺寸$W_T&lt;=2^{n-1}$ & 接收窗口尺寸调整 一般设置与发送窗口尺寸相同（或小于）<ul><li>若发送方大于，eg.发送方设置为5（最大为4）接收方0号丢失，发送方向后滑到5 6 7 0号，则0号混淆</li></ul></li><li>过程：发送方收到未按序到达的确认分组信号时，对其进行记录，避免超时重发，且不可整体向前滑动（必卡在未收到确认的信号之后）</li></ol><h3 id=点对点协议ppp>点对点协议PPP<a hidden class=anchor aria-hidden=true href=#点对点协议ppp>#</a></h3><blockquote><p>最广泛的点对点数据链路层协议</p></blockquote><ol><li>为传输的各种数据报提供标准方法：封装成帧+链路控制协议LCP+一套网络控制协议NCPs<ul><li>NCPs每个协议支持不同的网络层协议</li></ul></li><li>帧格式
<img loading=lazy src=image-9.png alt="alt text"><ul><li>0x7E十六进制==>01111110二进制</li></ul></li><li>透明传输实现：<ul><li>面向字节的异步链路——插入转义字符的字节填充法</li><li>面向比特的同步链路——插入0的比特填充法</li></ul></li><li>差错检测：对每个收到的PPP帧进行CRC检验 不通过的帧丢弃<ul><li>向上不提供可靠传输</li></ul></li></ol><h3 id=媒体接入控制mac>媒体接入控制MAC<a hidden class=anchor aria-hidden=true href=#媒体接入控制mac>#</a></h3><blockquote><p>Medium Access Control</p></blockquote><ol><li>基本概念：共享信道需协调多个发送与接收站点对一个共享传输媒体的占用
<img loading=lazy src=image-10.png alt="alt text"></li><li>类型：静态划分信道 / 动态接入控制<ul><li>静态多在物理层中应用</li><li>动态包括受控接入（以下两分类）与随机接入eg.共享式以太网<ul><li>集中控制：主站轮询</li><li>分散控制：令牌轮流</li></ul></li></ul></li></ol><h4 id=静态划分信道>静态划分信道<a hidden class=anchor aria-hidden=true href=#静态划分信道>#</a></h4><ol><li>信道复用：一条物理线路同时传输多路用户信号
<img loading=lazy src=image-11.png alt="alt text"></li><li>常见复用技术：<ul><li>频分复用FDM：占用不同的频带资源</li><li>时分复用TDM：占用不同时隙 每个时隙周期出现</li><li>波分复用WDM：占用不同波长</li><li>码分复用CDM：（多用于多址接入 码分多址CDMA）各用户可同时在同样的频带上通信 使用不同码型<ul><li>每个比特时间被划分为m个短间隔（码片Chip） 每个站被指派唯一的m bit码片序列<ul><li>若要发送比特1 则发送自己的码片序列</li><li>0 则发送码片序列反码</li><li>每个站的码片序列必相互正交且不同==>接收站对收到的叠加信号与各站的码片序列相乘，得到-1则该站发送了0，得+1则发送了1，其它则未发送</li></ul></li></ul></li></ul></li></ol><h4 id=动态接入控制随机接入>动态接入控制——随机接入<a hidden class=anchor aria-hidden=true href=#动态接入控制随机接入>#</a></h4><h5 id=csmacd>CSMA/CD<a hidden class=anchor aria-hidden=true href=#csmacd>#</a></h5><ol><li>（早期以太网）载波监听多址接入/碰撞检测<ul><li>多址接入MA：多站连接在一条总线上 竞争使用</li><li>载波监听CS：每个站发送帧前先检测总线上是否有其他站点在发送，若有96比特时间空闲，则发送</li><li>CD：每个正在发送帧的站边发送边检测碰撞，若发生则立即停止发送，过段时间继续</li></ul></li><li><em>争用期</em>：主机最多经过<em>多久</em>可检测到本次发送是否遭受碰撞</li><li>最小帧长：若过小，发送方不知发生了碰撞<br><img loading=lazy src=image-12.png alt="alt text"></li><li>最大帧长：若过大，其它主机长时间无法发送信号，接收端也可能溢出</li><li>截断二进制指数退避算法：退避时间 = 基本退避时间（争用期） x 随机数r<ul><li>r从0,1,…,$2^k-1$中随机取，$k=min[重传次数,10]$</li><li>退避时间随重传次数增加而增大（动态退避） 可减小发生碰撞的概率</li></ul></li><li>信道利用率——$S=\frac{T_0}{T_0+\tau}$<ul><li>$T_0$为发送成功时间</li><li>$2\tau$为争用期</li></ul></li></ol><h5 id=csmaca>CSMA/CA<a hidden class=anchor aria-hidden=true href=#csmaca>#</a></h5><blockquote><p>（无线）CA 碰撞避免</p></blockquote><ol><li>帧间间隔：（802.11标准规定）所有站点必须在持续检测到信道空闲一段指定时间后才能发送帧<ul><li>短帧间间隔SIFS：分隔开属于一次对话的各帧</li><li>DCF帧间间隔DIFS：在DCF方式中用来发送数据帧 & 管理帧
<img loading=lazy src=image-13.png alt="alt text"></li></ul></li><li>相关问题与解答：<ul><li>why：源站检测到空闲后还要等待DIFS？<ul><li>让优先级更高的帧（其他站上）先发送</li></ul></li><li>why：目的站正确接收数据帧后还要等待SIFS？<ul><li>完成从接收到发送的状态切换</li></ul></li><li>why：其他站要退避随机时间？<ul><li>避免同时发送</li></ul></li></ul></li><li>使用退避算法的情况：<ul><li>发送数据帧之前检测到信道忙</li><li>每次重传数据帧</li><li>每次成功发送后要连续发送下一帧（避免一个站点长时间占用信道）</li></ul></li><li>退避算法：站点为退避计时器设置一个随机的退避时间，计到零开始发送，若信道转忙则冻结等其转闲后经过DIFS后继续计数<ul><li>进行第i次退避时，退避时间在0,1,…,$2^{2+i}+1$中随机选择并乘基本退避时间<ul><li>基本退避时间 = 一个时隙的长度</li><li>第六次退避后 不再增加（达到255）</li></ul></li><li>减少选择相同退避时间的概率</li></ul></li><li>允许对信道进行预约<ul><li>发送数据帧前发送短控制帧 = 请求发送RTS<ul><li>RTS碰撞则执行退避算法重传RTS</li></ul></li><li>目的站收到且空闲 发送响应控制帧 = 允许发送CTS</li><li>发送站收到并等待SIFS后可发送</li><li>其他站收到CTS后推迟接入</li></ul></li><li>虚拟载波监听：监听到RTS/CTS/数据帧，即可知道信道被占用的持续时间<ul><li>减少隐蔽站带来的碰撞问题</li></ul></li></ol><h3 id=mac地址-ip地址-arp协议>MAC地址 IP地址 ARP协议<a hidden class=anchor aria-hidden=true href=#mac地址-ip地址-arp协议>#</a></h3><blockquote><p>MAC地址是以太网的MAC子层使用的地址——数据链路层中
IP地址是TCP/IP体系结构网际层使用的地址
ARP协议属于TCP/IP的网际层 可以通过IP地址获取到MAC地址</p></blockquote><h4 id=mac地址>MAC地址<a hidden class=anchor aria-hidden=true href=#mac地址>#</a></h4><blockquote><p>链路层首部封装</p></blockquote><ol><li>（多个主机在同个广播信道上）需要唯一的数据链路层地址<ul><li>每个帧中需携带标识发送主机和接收主机的地址——MAC地址</li><li>一般被固化在硬件上 = “硬件地址”</li><li>= “物理地址”（win系统中）但不属于物理层</li></ul></li><li>每个网络适配器都有一个全球唯一的MAC地址——对各接口的唯一标识（而非设备）</li><li>（IEEE 802局域网）MAC地址格式：组织唯一标识符OUI（三字节） + 网络接口标识符（三字节）<ol><li>OUI由注册管理结构分配 后3字节由厂商分配</li><li>通常将每4个<strong>比特</strong>用一个16进制数表示 = 12个的16进制数</li><li>MAC地址的第1字节的b0位（第0位）取0表示单播地址 取1表示多播地址</li><li>MAC地址的第1字节的b1位（第1位）取0表示全球管理 取1表示本地管理
<img loading=lazy src=image-14.png alt="alt text"></li></ol></li><li>MAC地址类型👆：<ul><li>全球+单播：厂商生产网络设备时固化</li><li>全球+多播：标准网络设备支持的</li><li>本地+单播：网络管理员分配 覆盖全球单播</li><li>本地+多播：用户配置主机软件 表明其对多播组的从属关系</li></ul></li><li>地址发送顺序：第一字节->第六字节 b0->b7</li><li>单播/广播/多播MAC地址：接收方地址（广播填全F 多播填多播组地址）<ul><li>若多播组地址在接收方的多播组列表中 则接收</li></ul></li></ol><h4 id=ip地址作用网络层>IP地址作用（网络层）<a hidden class=anchor aria-hidden=true href=#ip地址作用网络层>#</a></h4><blockquote><p>若要接入因特网 = IP地址+MAC地址 / 若不接入 只需MAC地址</p></blockquote><ol><li>组成：网络编号+主机编号<ul><li>主机编号：标识<strong>同一网络</strong>上不同主机/路由器各接口</li></ul></li><li>数据包转发过程：<ul><li>每个链路结束 目的MAC地址与源MAC地址<strong>都会改变</strong> IP地址始终如一</li><li>每个设备只知下一设备的IP地址 不知MAC地址——地址怎样转变？ARP协议
<img loading=lazy src=image-16.png alt="alt text"></li></ul></li></ol><h4 id=arp协议>ARP协议<a hidden class=anchor aria-hidden=true href=#arp协议>#</a></h4><blockquote><p>广播</p></blockquote><ol><li>封装在MAC帧中 所有主机检查是否请求的是自己的MAC地址 若否则忽略<ul><li>若是，（添加到自己的ARP高速缓存）则单播发送自己的MAC地址 原请求端将其保存到自己的ARP高速缓存中</li></ul></li><li>ARP只能在一个网络/一个链路中使用 <strong>不可跨网络</strong></li></ol><h3 id=集线器与交换机>集线器与交换机<a hidden class=anchor aria-hidden=true href=#集线器与交换机>#</a></h3><ol><li>集线器：逻辑上仍是<strong>总线网</strong> + 只在物理层工作（不进行碰撞检测）+ 一般有少量的容错能力<ul><li>集线器HUB在物理层扩展以太网：集线器连接其它集线器</li></ul></li><li>以太网交换机：多接口（全一般双工）+ 能同时联通多对接口 + 工作在数据链路层（包括物理层）<ul><li>帧交换表（自学习算法建立）：查找帧的目的MAC地址对应的接口号</li><li>帧的转发方式：存储转发 & 直通交换（基于硬件的交换矩阵）</li></ul></li><li>对比：集线器会扩大冲突域 交换机会隔离冲突域</li></ol><h3 id=以太网交换机自学习转发帧>以太网交换机自学习&转发帧<a hidden class=anchor aria-hidden=true href=#以太网交换机自学习转发帧>#</a></h3><ol><li>自学习：盲目泛洪（发给所有接口）——记录接收接口的号（及其MAC）与发送的接口号（及其MAC）<ul><li>到期自动删除记录</li></ul></li></ol><h3 id=以太网交换机生成树协议stp>以太网交换机生成树协议STP<a hidden class=anchor aria-hidden=true href=#以太网交换机生成树协议stp>#</a></h3><ol><li>提升以太网可靠性：添加冗余链路（负面效应：网络环路（问题👇）<ul><li>广播风暴——大量消耗网络资源 无法正常转发其他数据帧</li><li>主机收到重复的广播帧</li><li>帧交换表反复振荡（同一MAC地址但接口一直变化）</li></ul></li><li>（改良）生成树协议STP——自动计算并构建一个逻辑上没有环路的网络——<strong>树形</strong><ul><li>网络物理拓扑发生变化时，生成树需重新计算</li></ul></li></ol><h3 id=vlan虚拟局域网>VLAN虚拟局域网<a hidden class=anchor aria-hidden=true href=#vlan虚拟局域网>#</a></h3><blockquote><p>多个以太网交换机互连起来的交换式以太网 所有站点属于同一广播域</p></blockquote><ol><li>广播域过大弊端：广播风暴 + 难以管理维护 + 潜在的安全问题</li><li>分割广播域方法：路由器隔离（工作在网络层） / VLAN</li><li>VLAN：将设备划分为与物理位置无关的逻辑组的技术</li></ol><h4 id=vlan实现机制>VLAN实现机制<a hidden class=anchor aria-hidden=true href=#vlan实现机制>#</a></h4><ol><li>IEEE 802.1Q帧——在MAC帧中源MAC地址后插入4字节VLAN标记<ul><li><strong>交换机</strong>收到普通的以太网帧时 插入标记 = “打标签”</li><li>转发时 可能删除 = “去标签”</li></ul></li><li>交换机端口类型：（交换机各端口的缺省VLAN ID 👇称为PVID）<ul><li>Access——一般连接用户计算机 只能属于一个VLAN PVID与端口所属VLAN的ID同<ul><li>若帧中VID与端口PVID同 则去标签并转发 否则不转</li></ul></li><li>Trunk——交换机间/交换机与路由器间的互连 可以属于多个VLAN 用户可设置其PVID值<ul><li>发送：对VID=PVID的帧——去标签后转发 / 不等的帧——直接转发</li><li>接收：接收未打标签的帧 根据接收帧的那个端口的VLAN打标签
<img loading=lazy src=image-17.png alt="alt text"></li></ul></li><li>Hybrid——Trunk Access能用的地方都能用 其它与trunk类似 除发送处理方法：查看帧的VID是否在端口的去标签列表中（其余同👆）<ul><li>应用如下👇
<img loading=lazy src=image-18.png alt="alt text"></li></ul></li></ul></li></ol><h2 id=网络层>网络层<a hidden class=anchor aria-hidden=true href=#网络层>#</a></h2><blockquote><p>实现网络互连（路由器）——数据包传输</p></blockquote><ol><li>三个问题：向运输层提供的服务 + 网络层寻址 + 路由选择</li><li>TCP/IP协议栈的网络层使用网际协议IP so 被称为网际层</li></ol><h3 id=提供的服务>提供的服务<a hidden class=anchor aria-hidden=true href=#提供的服务>#</a></h3><h4 id=面向连接的虚电路服务>面向连接的虚电路服务<a hidden class=anchor aria-hidden=true href=#面向连接的虚电路服务>#</a></h4><ol><li>可靠通信由网络保证</li><li>必建立网络层的连接（虚电路VC）——通信双方沿已建立的虚电路发送分组<ul><li>目的主机地址在建立后不再需要 在分组首部携带VC编号即可</li><li>存储转发方式</li><li>通信结束后 释放VC</li></ul></li></ol><h4 id=无连接的数据报服务>无连接的数据报服务<a hidden class=anchor aria-hidden=true href=#无连接的数据报服务>#</a></h4><blockquote><p>因特网使用——网络造价低</p></blockquote><ol><li>可靠通信由用户主机保证</li><li>不需建立网络层连接</li><li>每个分组可走不同路径 每个分组首部需携带目的主机的完整地址</li></ol><blockquote><p>监测到拥塞时可合理丢弃IP分组</p></blockquote><h3 id=ipv4地址>IPv4地址<a hidden class=anchor aria-hidden=true href=#ipv4地址>#</a></h3><h4 id=概述-2>概述<a hidden class=anchor aria-hidden=true href=#概述-2>#</a></h4><blockquote><p>因特网上每个主机/路由器的每个接口分配全世界unique的32bit标识符</p></blockquote><ol><li>发展：分类编址&ndash;>划分子网&ndash;>无分类编址</li><li>表示方法：点分十进制表示方法——每<code>8bit</code>分为一组 用<code>.</code>隔开</li></ol><h4 id=分类编址>分类编址<a hidden class=anchor aria-hidden=true href=#分类编址>#</a></h4><p><img loading=lazy src=image-19.png alt="alt text"></p><ol><li>五类地址👆<ul><li>ABC类可分配给主机/路由器的各接口</li><li>主机号全0 = <strong>网络地址</strong> 不能分配给主机（···）</li><li>主机号全1 = <strong>广播地址</strong> 不能分配···——该网络上所有地址都可收到目的地址为广播地址的信息</li></ul></li><li>A类：最小网络号0保留不指派 最大网络号127作为本地环回测试地址不指派<ul><li>最小本地环回测试地址：127.0.0.1 （主机号不能全0全1）</li></ul></li><li>B类：最小网络号128.0（除首位全0）最大网络号191.255（除二位全1）</li><li>C类：类似B类👆 网络号范围192~223</li></ol><h4 id=划分子网>划分子网<a hidden class=anchor aria-hidden=true href=#划分子网>#</a></h4><ol><li>子网掩码——表明IP地址的<strong>主机号</strong>中有几个比特被借走作为子网号<ul><li>连续1 = 网络号（不变）+子网号（占原来主机号的位置）</li><li>连续0 = 主机号</li><li>运算即得所在子网的网络地址</li></ul></li><li>默认的子网掩码：未划分子网时使用的子网掩码 eg.255.0.0.0（A类）</li></ol><h4 id=无分类编址>无分类编址<a hidden class=anchor aria-hidden=true href=#无分类编址>#</a></h4><blockquote><p>无分类域间路由选择CIDR</p></blockquote><ol><li>编写方法：斜线记法 eg.128.14.35.7/20 20表示网络前缀所占的比特数（后面的是主机编号）<ul><li>将网络前缀都相同的连续的IP地址组成CIDR地址块</li><li>聚合C类网数量 = 地址数量 / C类网前缀数量 $2^8$</li></ul></li></ol><blockquote><p>主机号依然不可全0全1</p></blockquote><ol start=2><li>路由聚合（构造超网）——eg. 一个路由可以保存其连接的<strong>网络的地址的共同前缀</strong> 发送给其他路由 = 路由聚合后的目的网络地址（主机号设为0）</li></ol><h4 id=ipv4地址的应用规划>IPv4地址的应用规划<a hidden class=anchor aria-hidden=true href=#ipv4地址的应用规划>#</a></h4><ol><li>定长的子网掩码FLSM：用同个子网掩码划分子网<ul><li>每个子网需要的IP地址数量不同时 会造成浪费</li></ul></li><li>变长的子网掩码VLSM：不同子网掩码划分——每个子网分配的IP地址数量不同<ul><li>起点位置选择子网中块数量（初步分配的地址数量eg.6台主机+1路由器地址+1广播1网络=9 则选16）的整数倍</li><li>可以从主机多的子网开始分
<img loading=lazy src=image-20.png alt="alt text"></li></ul></li></ol><h3 id=ip数据报的转发与发送>IP数据报的转发与发送<a hidden class=anchor aria-hidden=true href=#ip数据报的转发与发送>#</a></h3><blockquote><p>=主机发送+路由器转发 以下忽略ARP与以太网交换机的工作过程</p></blockquote><ol><li>数据报传递方式：直接交付（以太网交换机可交付） & 间接交付（需路由器中转）</li><li>主机发送过程：主机A将自己的IP与子网掩码做<code>&</code>运算，得到网络地址—->将目标IP与子网掩码<code>&</code> 若网络地址不同&ndash;>需要路由器转发（不在同一子网）<ul><li>how主机知道路由器？</li><li>给每个主机设置<strong>默认网关</strong> 即对应路由器的IP地址</li></ul></li><li>路由器转发过程：检查IP数据包首部是否出错（差错校验）（错则丢弃并通知源主机）&ndash;>根据数据报的目的地址在路由表中查找匹配条目（与路由条目中的地址掩码<code>&</code>，检查网络号是否匹配）&ndash;>转发 若不匹配则丢弃并通知源主机<ul><li>采用<strong>最长前缀匹配</strong>
<img loading=lazy src=image-21.png alt="alt text"></li></ul></li><li>注意：广播数据报路由器不会转发（<strong>隔离广播域</strong>）</li></ol><h3 id=静态路由配置及路由环路问题>静态路由配置及路由环路问题<a hidden class=anchor aria-hidden=true href=#静态路由配置及路由环路问题>#</a></h3><ol><li>静态路由配置：人工配置路由表（指定目的网络地址与下一跳的接口）<ul><li>不能及时适应网络状态（拓扑 流量等）的变化</li></ul></li><li>可能导致路由环路的原因：<ul><li>配置错误</li><li>聚合了不存在的网络</li><li>网络故障</li></ul></li></ol><h4 id=特殊概念>特殊概念<a hidden class=anchor aria-hidden=true href=#特殊概念>#</a></h4><ol><li>默认路由：具有相同下一跳的不同目的网络的路由条目 可以将目的网络写作0.0.0.0/0（静态）<ul><li>其它的所有目的网络都转向此接口</li></ul></li><li>特定主机路由：设置目的网络地址为目的主机的IP 子网掩码有32位1（静态）<ul><li>下一跳还是在特定主机连接的路由器接口</li></ul></li></ol><h4 id=可能的路由环路>可能的路由环路<a hidden class=anchor aria-hidden=true href=#可能的路由环路>#</a></h4><ol><li>配置错误（配置了循环的下一跳接口）：IP数据报首部设置生存时间TTL 进入路由器后减一 若某次进入后TTL=0 则丢弃</li><li>聚合不存在的网络（本应将错误IP丢弃）：可添加针对不存在的网络的黑洞路由 即下一跳设置为null0
<img loading=lazy src=image-22.png alt="alt text"></li><li>网络故障（某IP地址的网络出现故障 路由器自动丢弃对应路由表条目）：添加针对该网络的黑洞路由
<img loading=lazy src=image-23.png alt="alt text"></li></ol><h3 id=路由选择协议>路由选择协议<a hidden class=anchor aria-hidden=true href=#路由选择协议>#</a></h3><h4 id=概述-3>概述<a hidden class=anchor aria-hidden=true href=#概述-3>#</a></h4><ol><li>静态路由选择：人工配置——小规模网络<ul><li>不能及时适应网络状态变化</li></ul></li><li>动态路由选择：自动获取路由信息（by路由选择协议）<ul><li>特点与👆反</li></ul></li><li>因特网路由选择协议特点：自适应（动态） + 分布式（路由器间交换路由信息） + 分层次（因特网划分为许多较小的自治系统AS）</li><li>因特网的分层次路由选择协议：（网关 = 路由）<ul><li>自治系统内部采用内部网关协议IGP</li><li>AS间采用外部网关协议EGP</li></ul></li><li>常见的内部网关协议：<ul><li>路由信息协议RIP——基于距离向量</li><li>内部网关路由协议IGRP——基于距离向量</li><li>增强型内部网关路由协议EIGRP——结合距离向量与链路</li><li>开放式最短路径优先OSPF——基于链路</li><li>中间系统到中间系统IS-IS——基于链路</li></ul></li><li>常见EGP：边界网关协议BGP</li><li>路由器基本结构：路由选择部分（周期性与其它路由器交流并更新） + 分组转发部分<ul><li>转发表from路由表</li><li>路由报文可更新路由表</li><li>具有输入输出缓冲区
<img loading=lazy src=image-24.png alt="alt text"></li></ul></li></ol><h4 id=rip>RIP<a hidden class=anchor aria-hidden=true href=#rip>#</a></h4><blockquote><p>最先得到广泛使用的IGP 用UDP协议直接封装报文 后由IP协议封装</p></blockquote><ol><li>要求：AS内每个路由器维护自己到其它每个网络的距离记录——距离向量D-V（一组距离）<ul><li>用跳数Hop Count作为度量</li><li>直连网络&ndash;路由器 = 1；非直连网络&ndash;路由器 = 经过的路由器数+1</li><li>一条路径最多15个路由器 = 只适用小型互连网</li></ul></li><li>特点：<ul><li>若有多条距离相等的路由 可进行等价负载均衡</li></ul></li><li>包含要点：仅与相邻路由器交换信息 + 交换路由表 + 周期性交换</li></ol><blockquote><p>基本工作过程 = 路径规划（收敛则找到最短路径）</p></blockquote><ol start=4><li>更新规则：判断到达网络是否更新&ndash;>下一跳是否相同&ndash;>相同时更新消息 不同时比较路径长短 等于时添加做负载均衡
<img loading=lazy src=image-25.png alt="alt text"></li><li>问题：“坏消息传得慢”（发生故障后👇） = 路由环路/距离无穷计数问题<ul><li>D-V算法固有问题
<img loading=lazy src=image-26.png alt="alt text"></li></ul></li><li>减少问题的措施：限制最大路径距离 路由表发生变化时就发送更新报文（触发更新） 不让同一路由信息通过此接口反向传送（水平分割）</li></ol><h4 id=ospf>OSPF<a hidden class=anchor aria-hidden=true href=#ospf>#</a></h4><ol><li>采用Dijkstra提出的SPF（最短路径算法）<ul><li>基于链路 + 不会产生路由环路 + 不限制网络规模 收敛快</li></ul></li><li>实现：<ul><li>通过交互问候（Hello）分组 维护邻居关系<ul><li>封装在IP数据报中 发往组播地址224.0.0.5</li></ul></li><li>每个路由器产生LSA链路状态通告<ul><li>包括直连网络链路状态信息 & 邻居路由器的</li><li>被封装在链路状态更新分组LSU中 <strong>洪泛法</strong>发送</li></ul></li><li>每个路由器用LSDB链路状态数据库存储LSA<ul><li>通过洪泛法 最终所有路由器的LSDB一致</li></ul></li><li>基于LSDB进行SPF计算 构建路由表</li></ul></li><li>五种分组类型：Hello 数据库描述 链路状态请求 链路状态更新 链路状态确认<ul><li>周期时间/更新信息/回应其它路由器请求时 发送链路状态更新分组
<img loading=lazy src=image-27.png alt="alt text"></li></ul></li><li>多点接入网络中：选举指定路由器DR & 备用的指定路由器BDR<ul><li>所有的非DR BDR只与其建立邻居关系</li></ul></li><li>将一个AS划分为若干的区域 有自己的标识符<ul><li>所有接口在区域内 = 区域内路由器IR</li><li>区域边界路由器ABR 与其他区域联通（两接口 一对外一对内）</li><li>主干路由器BBR 主干区域内的路由器</li><li>自治系统边界路由器ASBR 与其它自治系统交换信息</li></ul></li></ol><h4 id=bgp>BGP<a hidden class=anchor aria-hidden=true href=#bgp>#</a></h4><blockquote><p>自治系统<strong>内</strong>度量采用的代价不同 故自治系统<strong>间</strong>不可用代价作为度量</p></blockquote><ol><li>每个AS需有至少一个BGP发言人<ul><li>不同AS的发言人交换路由信息前需建立<strong>TCP</strong>连接 端口号179</li><li>交换BGP报文以建立BGP会话 以此交换路由信息</li><li>交换网络可达性信息 后找出到达各AS较好的路由——无环连通图</li></ul></li><li>四种报文（BGP-4）：打开 更新 保活 通知
<img loading=lazy src=image-28.png alt="alt text"></li></ol><h3 id=ipv4数据报首部格式>IPv4数据报首部格式<a hidden class=anchor aria-hidden=true href=#ipv4数据报首部格式>#</a></h3><blockquote><p>IP数据报</p></blockquote><ol><li>固定部分20字节 + 可变部分40字节<ul><li>固定部分中每个区域都以4字节为单位（要么4要么8要么····）
<img loading=lazy src=image-29.png alt="alt text"></li></ul></li><li>解释：<ul><li>版本：通信双方采用的IP协议版本必相同</li><li>首部长度：最小取值为5（仅有20字节固定部分） 最大15（20固定+40可变）</li><li>可选字段：长度1字节~40字节</li><li>填充字段：确保首部长度为4字节的整数倍</li><li>区分服务：区分不同等级的服务质量</li><li>总长度 = 首部 + 数据载荷</li></ul></li><li>解释：根据以太网MTU将数据载荷分片以封装成帧<ul><li>标识：同一数据报的各分片应具相同标识</li><li>标志：3bit DF位（1不许分片 0允许分片） MF位（1后还有分片 0此为最后分片） 保留位（必为0）</li><li>片偏移：分片数据报的数据载荷相对原数据报偏移的单位（以8字节为<strong>单位</strong>表示 eg.偏移32个字节则在此写4）</li></ul></li><li>解释：<ul><li>生存时间TTL：原来以秒为单位 现在以跳数为单位 （路由器转发时减一若为0则丢弃</li><li>协议：指明数据部分是哪种协议单元（ICMP-1 IGMP-2 TCP-6 UDP-17 IPv6-41 OSPF-89）</li><li>首部检验和：差错检查 比CRC简单 = “因特网检验和”<ul><li>IPv4所有路由器都要检查 IPv6不再检查</li></ul></li></ul></li></ol><h3 id=网际控制报文协议icmp>网际控制报文协议ICMP<a hidden class=anchor aria-hidden=true href=#网际控制报文协议icmp>#</a></h3><blockquote><p>更有效地转发IP数据报 提高交付成功地机会</p></blockquote><ol><li>特点：主机/路由器用ICMP发送差错报告报文&询问报文 + 被封装在IP数据报中</li></ol><h4 id=差错报告报文>差错报告报文<a hidden class=anchor aria-hidden=true href=#差错报告报文>#</a></h4><ol><li>终点不可达：不能交付数据报 向源点发送</li><li>源点抑制：路由器/主机由于拥塞丢弃数据报 向源点发送（源点发送速率放慢）</li><li>时间超过：TTL 丢弃时向源点发送<ul><li>分片不完整时 全部丢弃</li></ul></li><li>参数问题：首部中检验与字段发现误码</li><li>改变路由（重定向）：路由器将改变路由报文发送给主机</li><li>不发送的情况：对ICMP差错报文不发 第一个分片的后续报片 具有多播地址的数据报 特殊地址（127.0.0.0等）</li></ol><h4 id=询问报文>询问报文<a hidden class=anchor aria-hidden=true href=#询问报文>#</a></h4><ol><li>回送请求与回答——测试目的站是否可达（收到的主机必须回答）</li><li>时间戳请求和回答——时钟同步 测量时间</li></ol><h4 id=应用>应用<a hidden class=anchor aria-hidden=true href=#应用>#</a></h4><ol><li>分组网间探测PING（packet Internet groper）<ul><li>应用层直接使用网际层的ICMP 不通过运输层的TCP or UDP</li></ul></li><li>跟踪路由traceroute 测试IP数据报从源主机到目的主机经过哪些路由器（原理：<strong>时间超过</strong>差错报告）<ul><li>应用层直接使用网际层的ICMP 不通过运输层的TCP or UDP<ul><li>Unix中在运输层使用UDP</li></ul></li></ul></li></ol><h3 id=虚拟专用网vpn网络地址转换nat>虚拟专用网VPN网络地址转换NAT<a hidden class=anchor aria-hidden=true href=#虚拟专用网vpn网络地址转换nat>#</a></h3><h4 id=vpn-virtual-private-network>VPN virtual private network<a hidden class=anchor aria-hidden=true href=#vpn-virtual-private-network>#</a></h4><ol><li>VPN中各主机分配的地址是某机构可自由分配的专属地址（IPv4地址紧缺）<ul><li>“IP隧道技术”</li></ul></li><li>分类：内联网VPN & 外联网VPN</li></ol><h4 id=nat-network-address-translation>NAT network address translation<a hidden class=anchor aria-hidden=true href=#nat-network-address-translation>#</a></h4><ol><li>使用内部专用地址的专用网络用户<strong>共享</strong>少量外部全球地址以访问因特网</li><li>过程：NAT路由器为发送端分配一个全球IP地址 并修改数据报的源地址 并记录内外网地址对应关系
<img loading=lazy src=image-30.png alt="alt text"></li><li>可以将运输层端口号与IP一起转换=一个全球IP地址可使多个（内部）主机与外通信<ul><li>IP地址同 端口号不同</li><li>网络地址源端口号转换NAPT</li></ul></li><li>else：外网主机不能首先发起通信（NAT屏蔽了内网主机的网络地址）——NAT穿越技术</li></ol><h2 id=运输层>运输层<a hidden class=anchor aria-hidden=true href=#运输层>#</a></h2><h3 id=运输层概述>运输层概述<a hidden class=anchor aria-hidden=true href=#运输层概述>#</a></h3><ol><li>提供面向连接的TCP & 无连接的UDP</li><li>运输应用进程 不同进程用不同端口接收（非物理意义上的端口）</li></ol><h3 id=运输层端口号-复用-分用>运输层端口号 复用 分用<a hidden class=anchor aria-hidden=true href=#运输层端口号-复用-分用>#</a></h3><h4 id=端口号>端口号<a hidden class=anchor aria-hidden=true href=#端口号>#</a></h4><ol><li>需用统一方法对TCP/IP体系的应用进程标识——端口号区分（16比特）</li><li>端口号只具有本地意义——本计算机应用层的各进程</li><li>熟知端口号 登记端口号 短暂端口号</li></ol><h4 id=发送方复用-接收方分用>发送方复用 接收方分用<a hidden class=anchor aria-hidden=true href=#发送方复用-接收方分用>#</a></h4><ol><li>应用报文（不同端口）&ndash;>UDP复用/TCP复用&ndash;>用户数据报（UDP封装）/报文段（TCP封装）&ndash;>IP复用 成为IP数据报&ndash;>接收方对IP分用成用户数据报/报文段&ndash;>分用成应用报文
<img loading=lazy src=image-31.png alt="alt text"></li><li>应用层的不同协议在运输层使用不同协议的不同端口号（eg.http->TCP 80 https->TCP 443）<ul><li>在网络层都使用IP协议</li></ul></li></ol><h3 id=udp-tcp对比>UDP TCP对比<a hidden class=anchor aria-hidden=true href=#udp-tcp对比>#</a></h3><ol><li>UDP 用户数据报协议——无连接（过程）<ul><li>支持单播多播广播</li><li>对应用层报文不合并不拆分</li><li>误码 丢失不处理</li><li>数据报首部仅8字节</li></ul></li><li>TCP 传输控制协议——三报文握手建立连接 四报文挥手释放连接<ul><li>仅支持单播</li><li>面向字节流 不保证传输的数据大小完全一致（交付时不检查传输了多少数据）</li><li>不会误码 丢失等</li></ul></li></ol><h3 id=tcp流量控制>TCP流量控制<a hidden class=anchor aria-hidden=true href=#tcp流量控制>#</a></h3><blockquote><p>让发送方发送速率不过快 来得及接收——滑动窗口实现</p></blockquote><ol><li>普通的滑动窗口算法（类帧）<ul><li>接收方发送ACK ack=n表示n之前的数据已收到</li><li>设置零窗口持续计时器——到时时向接收方发送零窗口探测报文段 得到窗口大小</li></ul></li></ol><h3 id=tcp拥塞控制>TCP拥塞控制<a hidden class=anchor aria-hidden=true href=#tcp拥塞控制>#</a></h3><ol><li>理想的拥塞控制——网络吞吐量=输入负载 输入负载过高 吞吐量不变<ul><li>无拥塞控制时 输入负载过大吞吐量反而减小</li></ul></li></ol><h4 id=方法-1>方法<a hidden class=anchor aria-hidden=true href=#方法-1>#</a></h4><blockquote><p>维护拥塞窗口变量——超时重传时判定为网络拥塞 发送方将拥塞窗口作为发送窗口</p></blockquote><ol><li>维护慢开始门限ssthresh状态变量——大于拥塞窗口时 采用慢开始算法 小于时采用拥塞避免算法 等于时均可使用<ul><li>不拥塞时拥塞窗口增大 拥塞时减小</li></ul></li><li>慢开始算法：每接到一个确认 指数级增大窗口</li><li>拥塞避免算法：窗口只加一 若超时重传——慢开始门限设为一半 窗口设置为1</li><li>快重传算法：（尽快重传）发送方收到三个连续的重复确认就重传<ul><li>接收方立即发送确认</li><li>收到失序报文段立即发出重复确认</li></ul></li></ol><blockquote><p>部分丢失不会认为是拥塞</p></blockquote><ol start=5><li>快恢复算法：收到3个重复确认后执行<ul><li>发送方将慢开始门限与拥塞窗口调整为当前窗口的一半 执行拥塞避免
<img loading=lazy src=image-32.png alt="alt text"></li></ul></li></ol><h3 id=tcp超时重传时间的选择>TCP超时重传时间的选择<a hidden class=anchor aria-hidden=true href=#tcp超时重传时间的选择>#</a></h3><blockquote><p>略大于往返时间</p></blockquote><ol><li>利用每次的往返时间RTT样本 计算加权平均往返时间👇
<img loading=lazy src=image-33.png alt="alt text"></li><li>超时重传时间RTO：$RTO=RTT_S+4*RTT_D$<ul><li>$RTT_D$ RTT偏差的加权平均👇
<img loading=lazy src=image-34.png alt="alt text"></li></ul></li><li>（针对超时重传时测不准RTT问题）Karn提出不采用超时重传的RTT样本<ul><li>时延突然增大——修正：出现超时重传时$RTO$变为原来2倍</li></ul></li></ol><h3 id=tcp可靠传输实现>TCP可靠传输实现<a hidden class=anchor aria-hidden=true href=#tcp可靠传输实现>#</a></h3><blockquote><p>以字节为单位的滑动窗口实现——类似报文段（不赘述）</p></blockquote><ol><li>发送方窗口大小根据接收方确定 但同时刻不一定总一样大</li><li>TCP未明确规定如何处理不按序到达的数据<ul><li>通常先临时存放 收到缺失的数据时再按序交付（应用进程）</li></ul></li><li>接收方必须有累计确认&稍待确认</li><li>全双工通信</li></ol><h3 id=tcp运输连接管理连接建立>TCP运输连接管理——连接建立<a hidden class=anchor aria-hidden=true href=#tcp运输连接管理连接建立>#</a></h3><ol><li>解决的问题：确知对方存在 + 协商参数 + 分配运输的实体资源</li></ol><h4 id=具体过程>具体过程<a hidden class=anchor aria-hidden=true href=#具体过程>#</a></h4><blockquote><p>三报文握手</p></blockquote><ol><li>TCP服务器<strong>被动等待</strong>TCP客户的连接请求 客户主动发起连接请求</li><li>过程：<ul><li>TCP服务器创建传输控制块 从关闭状态进入监听状态——<strong>被动打开连接</strong></li><li>客户创建传输控制块 向服务器发送连接请求报文段 进入同步已发送状态<ul><li><code>SYN=1</code> <code>seq=x</code> 表示其为连接请求报文段 不能携带数据——主动打开连接</li></ul></li><li>服务器发送对TCP连接请求的确认 进入同步已接受状态<ul><li><code>SYN=1 ACK=1 ack=x+1 seq=y</code> 也不能携带数据</li></ul></li><li>客户发送对确认的确认 进入连接已建立状态（数据load部分可以携带请求内容）<ul><li><code>ACK=1 seq=x+1 ack=y+1</code></li></ul></li><li>服务器接收后 进入连接已建立状态
<img loading=lazy src=image-35.png alt="alt text"></li></ul></li></ol><ul><li>客户与服务器的<code>seq</code>由各自决定 但<code>ack</code>序号与对方的<code>seq</code>有关（+1）</li></ul><ol start=3><li>不能两握手的原因：避免失效的连接请求报文段传输到服务器（服务器直接开启连接已建立状态 但客户不会理睬 浪费资源）</li></ol><h3 id=连接释放>连接释放<a hidden class=anchor aria-hidden=true href=#连接释放>#</a></h3><blockquote><p>四报文挥手</p></blockquote><ol><li>过程：<ul><li>客户发送连接释放报文段 进入终止等待1状态——主动关闭<ul><li><code>FIN=1 ACK=1 seq=u ack=v</code> seq是客户发送的最后字节序号+1 ack是<strong>客户收到</strong>的（<strong>服务器发送</strong>的）最后字节序号+1</li></ul></li><li>服务器发送普通确认报文段 进入关闭等待状态 并通知上层应用<ul><li><code>ACK=1 seq=v ack=u+1</code></li></ul></li><li>——此时进入半关闭状态 客户不发送只接受 服务器继续发送没有发完的数据</li><li>服务器发送连接释放报文段 进入最后确认状态（应用数据发完 让其关闭）——被动关闭<ul><li><code>FIN=1 ACK=1 seq=w ack=u+1</code> seq表示服务器自己发送的最后数据 ack是对客户发来的信息的重复确认</li></ul></li><li>客户发送普通确认报文段 进入时间等待状态<ul><li><code>ACK=1 seq=u+1 ack=w+1</code> seq要消耗一个序号</li></ul></li><li>服务器接收后进入关闭状态 客户发送后经过2MSL时间进入关闭状态<ul><li>MSL——最长报文段寿命</li><li>若客户直接关闭 确认报文段若遗失 服务器无法关闭
<img loading=lazy src=image-36.png alt="alt text"></li></ul></li></ul></li><li>保活计时器：服务器每收到一次客户数据就重重启保活计时器——若保活周期内未收到 则发送探测报文段——连续发送探测不回复 则服务器关闭连接</li></ol><h3 id=tcp报文段首部格式>TCP报文段首部格式<a hidden class=anchor aria-hidden=true href=#tcp报文段首部格式>#</a></h3><blockquote><p>固定首部20字节 + 扩展（可变）首部最大40字节
<img loading=lazy src=image-37.png alt="alt text"></p></blockquote><ol><li>组成：<ul><li>源端口——16bit 标示 <em>发送</em> 报文段的 <em>应用进程</em> 端口号</li><li>目的端口——16bit 接收报文段的应用进程端口号</li><li>序号——32bit 本报文段数据load的第一个字节序号</li><li>确认号——32bit 若为n 表示n-1号及以前的数据都接收 需要n号数据
*ACK位为1时才有效</li><li>数据偏移——数据load起始处到报文段起始处有多远 = TCP报文段首部长度（以4字节为单位）</li><li>窗口——发送方的接收窗口大小<ul><li>流量控制</li></ul></li><li>校验和——检查首部与数据load（计算时要在报文段前加12字节伪首部）</li><li>SYN同步标志位 终止标志位FIN</li><li>复位标志位RST（复位TCP连接）——<strong>取1时</strong> 表示TCP连接出现异常 需重新建立连接<ul><li>可用来拒绝非法报文段 拒绝打开TCP连接</li></ul></li><li>推送标志位PSH：若为1 该报文段会尽快上交应用进程</li><li>紧急功能：紧急标志位URG（取1有效）+紧急指针（指明紧急数据长度） = 紧急数据放到发送缓存最前 立刻封装后发送——接收缓存中同</li></ul></li><li>扩展首部：选项部分可添加很多选项👇 填充部分将保证首部能被4整除
<img loading=lazy src=image-38.png alt="alt text"></li></ol><h2 id=应用层>应用层<a hidden class=anchor aria-hidden=true href=#应用层>#</a></h2><h3 id=概述-4>概述<a hidden class=anchor aria-hidden=true href=#概述-4>#</a></h3><blockquote><p>最顶层</p></blockquote><ol><li>各层应用
<img loading=lazy src=image-39.png alt="alt text"></li></ol><h3 id=客户服务器方式与对等方式>客户/服务器方式与对等方式<a hidden class=anchor aria-hidden=true href=#客户服务器方式与对等方式>#</a></h3><blockquote><p>C/S方式与P2P方式 client/server & peer to peer</p></blockquote><h4 id=cs>C/S<a hidden class=anchor aria-hidden=true href=#cs>#</a></h4><blockquote><p>客户计算机&服务器计算机</p></blockquote><ol><li>客户请求服务 服务器提供服务</li><li>服务器始终运行 等待请求 & 具有固定端口号 & 运行服务器的主机具有固定的IP地址</li><li>服务集中型——会出现服务器跟不上客户机请求的情况——使用<strong>计算机群集</strong>（服务器场）构建虚拟服务器</li></ol><h4 id=p2p>P2P<a hidden class=anchor aria-hidden=true href=#p2p>#</a></h4><ol><li>对等方互为请求与服务方 双方直接通信——服务分散型</li><li>可扩展性（规模增大 性能不降低）</li></ol><h3 id=动态主机配置协议dhcp>动态主机配置协议DHCP<a hidden class=anchor aria-hidden=true href=#动态主机配置协议dhcp>#</a></h3><blockquote><p>通过DHCP自动获取网络配置信息 C/S类型</p></blockquote><ol><li>用<strong>UDP</strong>用户数据报传输——计算机<strong>加入新网络</strong>时可自动获取网络配置信息</li><li>主要过程：客户寻找DHCP服务器（广播）——服务器提供IP地址租用——客户接收租约——服务器确认租约——客户对IP地址续约——客户随时解除租约<ul><li>客户未获得IP地址时 使用0.0.0.0</li><li>挑选地址时 使用<strong>ARP</strong>确保挑选的地址未被占用</li><li>使用前 客户用ARP检查
<img loading=lazy src=image-40.png alt="alt text"></li></ul></li><li>DHCP中继代理：给与客户主机直接相连的路由器配置DHCP服务器的IP地址 使其成为中继代理——将寻找的数据报单播给服务器<ul><li>否则会丢弃客户的寻找DHCP服务器数据报</li></ul></li></ol><h3 id=域名系统dns>域名系统DNS<a hidden class=anchor aria-hidden=true href=#域名系统dns>#</a></h3><blockquote><p>域名便于记忆 但需用IP地址进行访问 = DNS对域名解析成目标服务器的IP地址</p></blockquote><ol><li>采用层次结构的命名树作为域名 使用分布式的域名系统==>大多域名在本地解析<ul><li>UDP封装</li></ul></li></ol><h4 id=层次树状结构的域名系统>层次树状结构的域名系统<a hidden class=anchor aria-hidden=true href=#层次树状结构的域名系统>#</a></h4><ol><li>eg.<code>···.三级域名.二级域名.顶级域名</code> 不区分大小写 完整域名不超过255字符</li><li>特点：各级域名由上级域名管理</li><li>分类：<ul><li>顶级域名TLD分类：国家 通用（com gov等） 反向域（IP地址反向解析为域名）</li></ul></li><li>转换：分布在各地的域名服务器实现转换<ul><li><strong>根域名</strong>服务器 顶级域名服务器 权限域名服务器（二级三级等） 本地域名服务器（默认···）<ul><li>权限域名服务器——管理某个区的域名</li><li>本地——代理作用 转发报文到其它域名服务器的等级结构
<img loading=lazy src=image-41.png alt="alt text"></li></ul></li></ul></li><li>解析过程：递归查询 / 迭代查询<ul><li>递归：主机->本地->根->顶级->权限->反向回</li><li>迭代：主机->本地->返回顶级地址 主机->顶级··· 主机->权限</li><li>主机到本地采用递归 其余采用迭代</li></ul></li><li>高速缓存：存放最近查询过的域名与IP地址——为每个项目设置计时器 超时项删除——不需DNS查询</li></ol><h3 id=文件传送协议ftp>文件传送协议FTP<a hidden class=anchor aria-hidden=true href=#文件传送协议ftp>#</a></h3><blockquote><p>C/S方式 可用<strong>ftp</strong>://balabal域名访问</p></blockquote><ol><li>提供交互式访问 允许客户指明文件类型与格式 存取权限<ul><li>屏蔽系统细节 适合在异构网络任意计算机间发送文件</li></ul></li><li>工作原理：<ul><li>客户与FTP服务器建立传送<strong>控制</strong>命令的TCP<strong>连接</strong>（FTP端口号20）</li><li>（客户告知）服务器发起传送文件的TCP连接——主动模式（数据连接）（端口号21）</li><li>客户发起传送文件的TCP连接——被动模式（数据连接）（FTP随机端口号）</li></ul></li></ol><h3 id=电子邮件>电子邮件<a hidden class=anchor aria-hidden=true href=#电子邮件>#</a></h3><blockquote><p>C/S</p></blockquote><ol><li>组成：用户代理（email客户端软件） + 邮件服务器 + 电子邮件所需协议（包括发送与接收协议）<ul><li>服务器向用户发送——POP3协议（其它为SMTP）</li></ul></li><li>全部建立TCP连接 常用的发送协议——SMTP 常用的接受协议——POP3
<img loading=lazy src=image-42.png alt="alt text"></li></ol><h4 id=smtp>SMTP<a hidden class=anchor aria-hidden=true href=#smtp>#</a></h4><ol><li>发送方周期性扫描邮件缓存 建立TCP连接（端口号25） 发送14条SMTP命令 接收方返回21种SMTP应答</li><li>针对发送方地址 接收方地址 邮件内容 结束符等都需交互
<img loading=lazy src=image-44.png alt="alt text"></li></ol><h4 id=电子邮件发送>电子邮件发送<a hidden class=anchor aria-hidden=true href=#电子邮件发送>#</a></h4><ol><li>格式：信封+内容（首部+主体）</li><li>SMTP只能传送ASCII码数据——MIME多用途因特网邮件扩展<ul><li>发送方非ASCII内容经过MIME转译为ASCII后给SMTP 接收方同</li><li>MIME增加了邮件首部字段 内容格式 传送编码等 也应用于HTTP</li></ul></li></ol><h4 id=接收>接收<a hidden class=anchor aria-hidden=true href=#接收>#</a></h4><ol><li>常用读取协议：POP邮局协议 IMAP因特网邮件访问协议——TCP 端口POP110&amp;IMAP143<ul><li>IMAP4允许用户操控邮件服务器中的邮箱——联机协议</li></ul></li></ol><h4 id=万维网email>万维网email<a hidden class=anchor aria-hidden=true href=#万维网email>#</a></h4><ol><li>使用HTTP协议与邮件服务器交互</li></ol><h3 id=万维网www>万维网WWW<a hidden class=anchor aria-hidden=true href=#万维网www>#</a></h3><blockquote><p>运行在因特网上的分布式应用 利用超链接将不同网站的网页链接</p></blockquote><ol><li>使用统一资源定位符URL指明位置<ul><li>格式：<code>&lt;协议>://&lt;主机>:&lt;端口>/&lt;路径></code></li></ul></li><li>万维网文档：HTML+CSS+JavaScript——通过浏览器渲染<ul><li>html超文本标记语言——网页结构与内容</li><li>css层叠样式表——审美</li><li>js脚本——控制网页行为</li></ul></li></ol><h4 id=http>HTTP<a hidden class=anchor aria-hidden=true href=#http>#</a></h4><ol><li>HTTP超文本传输协议——定义服务器怎样请求WWW文档 & 服务器怎样传回浏览器<ul><li>HTTP/1.0采用非持续链接 每次请求文件都需建立TCP</li><li>1.1采用持续连接 非流水线方式——收到一个请求的响应后才发送下一个请求<ul><li>流水线：收到响应前 可不断发送请求</li></ul></li></ul></li><li>请求报文格式👇：（面向文本 每个字段都是ASCII码串 长度不确定）
<img loading=lazy src=image-45.png alt="alt text"></li><li>报文格式：状态码202——正常 400——请求错误
<img loading=lazy src=image-46.png alt="alt text"></li><li>cookie——记录用户信息（浏览器与www服务器建立TCP）<ul><li>在服务器为用户生成唯一的cookie识别码 给浏览器返回识别码</li></ul></li></ol><h4 id=else>else<a hidden class=anchor aria-hidden=true href=#else>#</a></h4><ol><li>缓存与代理服务器——web缓存（客户机 中间系统（代理服务器）上都可）<ul><li>最近的请求与响应暂存在disk</li></ul></li></ol><script type=module>  
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs'; 
    mermaid.initialize({ startOnLoad: true });  
</script><script>Array.from(document.getElementsByClassName("language-mermaid")).forEach(e=>{e.parentElement.outerHTML=`<div class="mermaid">${e.innerHTML}</div>`})</script><style>.mermaid svg{display:block;margin:auto}</style></div><footer class=post-footer><ul class=post-tags><li><a href=https://Sattiluvcat.github.io/en/tags/408/>408</a></li></ul><nav class=paginav><a class=prev href=https://Sattiluvcat.github.io/en/posts/java/%E7%82%B9%E8%AF%84proj/><span class=title>« Prev</span><br><span>点评Proj</span>
</a><a class=next href=https://Sattiluvcat.github.io/en/posts/else/bi-rrt/><span class=title>Next »</span><br><span>Bi-RRT及改良</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share 计算机网络 on x" href="https://x.com/intent/tweet/?text=%e8%ae%a1%e7%ae%97%e6%9c%ba%e7%bd%91%e7%bb%9c&amp;url=https%3a%2f%2fSattiluvcat.github.io%2fen%2fposts%2fnotes%2f%25E8%25AE%25A1%25E7%25AE%2597%25E6%259C%25BA%25E7%25BD%2591%25E7%25BB%259C%2f&amp;hashtags=408"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 计算机网络 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fSattiluvcat.github.io%2fen%2fposts%2fnotes%2f%25E8%25AE%25A1%25E7%25AE%2597%25E6%259C%25BA%25E7%25BD%2591%25E7%25BB%259C%2f&amp;title=%e8%ae%a1%e7%ae%97%e6%9c%ba%e7%bd%91%e7%bb%9c&amp;summary=%e8%ae%a1%e7%ae%97%e6%9c%ba%e7%bd%91%e7%bb%9c&amp;source=https%3a%2f%2fSattiluvcat.github.io%2fen%2fposts%2fnotes%2f%25E8%25AE%25A1%25E7%25AE%2597%25E6%259C%25BA%25E7%25BD%2591%25E7%25BB%259C%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 计算机网络 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fSattiluvcat.github.io%2fen%2fposts%2fnotes%2f%25E8%25AE%25A1%25E7%25AE%2597%25E6%259C%25BA%25E7%25BD%2591%25E7%25BB%259C%2f&title=%e8%ae%a1%e7%ae%97%e6%9c%ba%e7%bd%91%e7%bb%9c"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 计算机网络 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fSattiluvcat.github.io%2fen%2fposts%2fnotes%2f%25E8%25AE%25A1%25E7%25AE%2597%25E6%259C%25BA%25E7%25BD%2591%25E7%25BB%259C%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 计算机网络 on whatsapp" href="https://api.whatsapp.com/send?text=%e8%ae%a1%e7%ae%97%e6%9c%ba%e7%bd%91%e7%bb%9c%20-%20https%3a%2f%2fSattiluvcat.github.io%2fen%2fposts%2fnotes%2f%25E8%25AE%25A1%25E7%25AE%2597%25E6%259C%25BA%25E7%25BD%2591%25E7%25BB%259C%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 计算机网络 on telegram" href="https://telegram.me/share/url?text=%e8%ae%a1%e7%ae%97%e6%9c%ba%e7%bd%91%e7%bb%9c&amp;url=https%3a%2f%2fSattiluvcat.github.io%2fen%2fposts%2fnotes%2f%25E8%25AE%25A1%25E7%25AE%2597%25E6%259C%25BA%25E7%25BD%2591%25E7%25BB%259C%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 计算机网络 on ycombinator" href="https://news.ycombinator.com/submitlink?t=%e8%ae%a1%e7%ae%97%e6%9c%ba%e7%bd%91%e7%bb%9c&u=https%3a%2f%2fSattiluvcat.github.io%2fen%2fposts%2fnotes%2f%25E8%25AE%25A1%25E7%25AE%2597%25E6%259C%25BA%25E7%25BD%2591%25E7%25BB%259C%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer><div id=disqus_thread></div><script>(function(){var e=document,t=e.createElement("script");t.src="https://www-sattiluvcat-github-io.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><script id=dsq-count-scr src=//www-sattiluvcat-github-io.disqus.com/count.js async></script></article></main><footer class=footer><span>&copy; 2025 <a href=https://Sattiluvcat.github.io/en/>Satti's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-551JRG13S2"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-551JRG13S2")</script></body></html>