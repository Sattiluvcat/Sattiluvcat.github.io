<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><head><script async src="https://www.googletagmanager.com/gtag/js?id=自己的G-MEASUREMENT_ID"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","自己的G-MEASUREMENT_ID")</script></head><title>八股 | Satti's Blog</title>
<meta name=keywords content="Java"><meta name=description content="梳理一些方便查看的主要知识内容"><meta name=author content="Satti"><link rel=canonical href=https://Sattiluvcat.github.io/en/posts/notes/%E5%85%AB%E8%82%A1/><link crossorigin=anonymous href=/assets/css/stylesheet.af5e671f6a7d21c7f5c73f39af31c43555fd91c98b39460c5187f1f8bccfacdf.css integrity="sha256-r15nH2p9Icf1xz85rzHENVX9kcmLOUYMUYfx+LzPrN8=" rel="preload stylesheet" as=style><link rel=icon type=image/png href=/favicon-48x48.png sizes=48x48><link rel=icon type=image/svg+xml href=/favicon.svg><link rel="shortcut icon" href=/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><meta name=apple-mobile-web-app-title content="MyWebSite"><link rel=manifest href=/site.webmanifest><link rel=alternate hreflang=en href=https://Sattiluvcat.github.io/en/posts/notes/%E5%85%AB%E8%82%A1/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&display=swap" rel=stylesheet><script type=text/javascript async src="https://cdn.bootcss.com/mathjax/2.7.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML">MathJax.Hub.Config({tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["[[","]]"]],processEscapes:!0,processEnvironments:!0,skipTags:["script","noscript","style","textarea","pre"],TeX:{equationNumbers:{autoNumber:"AMS"},extensions:["AMSmath.js","AMSsymbols.js"]}}}),MathJax.Hub.Queue(function(){var e,t=MathJax.Hub.getAllJax();for(e=0;e<t.length;e+=1)t[e].SourceElement().parentNode.className+=" has-jax"})</script><style>code.has-jax{font:inherit;font-size:100%;background:inherit;border:inherit;color:#515151}</style><script async src="https://www.googletagmanager.com/gtag/js?id=自己的G-MEASUREMENT_ID"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","自己的G-MEASUREMENT_ID")</script><meta property="og:title" content="八股"><meta property="og:description" content="梳理一些方便查看的主要知识内容"><meta property="og:type" content="article"><meta property="og:url" content="https://Sattiluvcat.github.io/en/posts/notes/%E5%85%AB%E8%82%A1/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-12-08T17:00:48+08:00"><meta property="article:modified_time" content="2024-12-08T17:00:48+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="八股"><meta name=twitter:description content="梳理一些方便查看的主要知识内容"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"文章","item":"https://Sattiluvcat.github.io/en/posts/"},{"@type":"ListItem","position":2,"name":"Notes📓","item":"https://Sattiluvcat.github.io/en/posts/notes/"},{"@type":"ListItem","position":3,"name":"八股","item":"https://Sattiluvcat.github.io/en/posts/notes/%E5%85%AB%E8%82%A1/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"八股","name":"八股","description":"梳理一些方便查看的主要知识内容","keywords":["Java"],"articleBody":" 数据库 基本 数据库 常见名词 元组——一条记录就是一个元组（一行） 码——唯一标识实体的属性（一列） 候选码——候选的可以唯一标识元组的码（且不包括多余属性——否则为超键） 主码——主键 外码——另外关系中的主码 主属性（可以当候选码的） 非主属性（不包含在任何候选码的属性） ER图——实体联系图 包括：实体 属性 联系（实体与实体间的关系） 形状：矩形 椭圆 菱形（一一对应） 范式：1NF（第一范式） 2NF 3NF 1NF:字段有原子性 数据不可再分（每格数据不可再分） 2NF：消除非主属性对码的部分函数依赖（= 完全依赖） 一张表中 X确定 Y必确定 = X–\u003eY（Y函数依赖于X） X 的真子集 Xo–\u003eY（Y 部分函数依赖于 X）——数据冗余 CUD 异常 CRUD create read update delete 完全依赖：(X,Y)–\u003eZ 但X Y单个都不可依赖 3NF:所有非主键属性间不能依赖 必相互独立 外键与级联： 级联更新\u0026删除：更新/删除某主键 若其被其他表引用 则需更新/删除所有引用记录 delete vs drop vs truncate 用法：drop丢弃（table） truncate清空数据 id回到1 delete删除数据（行）id无影响 delete可以回滚 事务提交后生效（会产生日志） drop释放表空间 truncate不产生日志（不能回滚 NoSQL 与SQL的区别： 非结构化存储 vs 结构化存储（固定行和列） 通常不支持ACID vs ACID MongoDB支持 但有所区别 atom consistency isolation durability balabal vs 性能取决于磁盘子系统 优化查询 索引 表结构等获得最佳性能 横向拓展（基于分片机制——水平分割 以行为单位分割并分开存储） vs 垂直（读写分离 分库分表 ···） 特点：灵活 可拓展 高性能 类型：文档 键值 图形 宽列 字符集 utf8 utf8mb4\n字符集合 eg.ASCII UTF(Unicode) UTF-8 = 8比特UTF（一个字最多占3字节） UTF8mb4 = 一个字最多占据4字节的utf8 Mysql指定字符集优先级 server-数据库-表-字段column渐增 连接字符集：客户端与服务器沟通时相互翻译选择的字符集 JDBC（Java操控数据库的api）驱动会影响连接字符集 SQL database–\u003etable–\u003eschema(ok for table/db)–\u003ecolumn–\u003erow–\u003eprimary key\n注意：所有空格都被忽略 连接JOIN关键字 ON指定连接条件（最终生成临时表） left right关键词–\u003e即使右/左表没有满足条件的行也返回左/右表中的所有行 select something from table1 join table2 on table1.id=table2.id; 索引 事务 例题（窗口函数balabal略） MySql 基础 名词： 关系型数据库：基于关系模型的数据库 关系模型表明db中存储数据间的联系 SQL：结构化查询语言 字段 字段类型 数值 字符串 日期 DECIMAL vs FLOAT/DOUBLE –\u003e 避免精度损失 why：TEXT BLOB不建议？ 不常用：text ≈ 长文本的char varchar \u0026 bolb = 二进制大对象 缺点：不能有默认值 \u0026 智能在磁盘上创建临时表 \u0026 检索效率低 diff：NULL vs '' NULL代表一个不确定的值–\u003e不能用= != \u003e \u003c等运算符 \u0026 NULL=NULL ==\u003e False 只能用is NULL / is not NULL查询 ''长度为0 不占用空间 vs NULL要占用空间 how：boolean类型？ tinyint类型–\u003e只能存储0 or 1 架构 what：执行sql语句的流程？ 连接器——身份认证\u0026权限 查询缓存（mysql8.0后移除） 未命中后执行下述流程 分析器——检查语法··· 优化器——选择最优执行方案 执行器——执行前先判断有否权限 无权限则报错 有则从存储引擎返回数据 插件式存储引擎——数据的存储与读取 支持InnoDB MyIsam ··· 存储引擎 架构？ 插件式架构 基于表（非数据库） MyISAM vs InnoDB 行级锁 \u0026 MVCC ==\u003e 不支持 vs 支持 事务 \u0026 崩溃后的恢复 （同上）InnoDB使用redo log（同CS186） 外键 （同上） 索引实现 索引与数据分离 vs 数据文件即为索引文件（叶子节点） 缓存 键缓存（仅缓存数据页） vs buffer pool缓存数据页\u0026索引页 查询缓存 nothing\n日志 CS186中采用ARIES策略 与下均类似 可参考\n常见日志？ 错误日志 查询日志 中继日志（用于主从复制） 二进制日志 慢查询日志 事务日志（redo log \u0026 undo log） 慢查询日志——记录执行时长超过阈值的查询语句 用途：需要优化的查询 监控应用程序的数据库交互性能 容量规划 what：binlog记录？ 描述数据库更改的事件 \u0026 可能已进行更改的语句的事件 \u0026 时间戳 以事务为单位 用途：数据恢复 增量备份 how：redo log保证持久性？（即使发生故障 数据也不会丢失） WAL预写日志——修改先写入redolog后事务提交 eg.提交了事务但未写入磁盘（稳定存储设备） 写入磁盘的操作从redo log中移除 顺序写入（写入到磁盘相邻位置） 崩溃恢复——InnoDB在重启后扫描redo log重做 双写缓冲——数据页先写入到双写缓冲区 后写入表空间 日志刷新——最严格的是每次事务提交时立即将redo log刷新到磁盘 ","wordCount":"1878","inLanguage":"en","datePublished":"2024-12-08T17:00:48+08:00","dateModified":"2024-12-08T17:00:48+08:00","author":[{"@type":"Person","name":"Satti"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://Sattiluvcat.github.io/en/posts/notes/%E5%85%AB%E8%82%A1/"},"publisher":{"@type":"Organization","name":"Satti's Blog","logo":{"@type":"ImageObject","url":"https://Sattiluvcat.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://Sattiluvcat.github.io/en/ accesskey=h title="Satti's Blog (Alt + H)"><img src=https://Sattiluvcat.github.io/img/label1.jpg alt aria-label=logo height=35>Satti's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://Sattiluvcat.github.io/en/search/ title="🔍搜索 (Alt + /)" accesskey=/><span>🔍搜索</span></a></li><li><a href=https://Sattiluvcat.github.io/en/ title=🏠主页><span>🏠主页</span></a></li><li><a href=https://Sattiluvcat.github.io/en/tags title=📑标签><span>📑标签</span></a></li><li><a href=https://Sattiluvcat.github.io/en/lulu/ title=😽Lulu><span>😽Lulu</span></a></li><li><a href=https://Sattiluvcat.github.io/en/archives/ title=📅时间轴><span>📅时间轴</span></a></li><li><a href=https://Sattiluvcat.github.io/en/about/ title=😎关于><span>😎关于</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://Sattiluvcat.github.io/en/>Home</a>&nbsp;»&nbsp;<a href=https://Sattiluvcat.github.io/en/posts/>文章</a>&nbsp;»&nbsp;<a href=https://Sattiluvcat.github.io/en/posts/notes/>Notes📓</a></div><h1 class="post-title entry-hint-parent">八股</h1><div class=post-description>梳理一些方便查看的主要知识内容</div><div class=post-meta><span title='2024-12-08 17:00:48 +0800 +0800'>2024-12-08</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;<span title='Last updated 2024-12-08 17:00:48 +0800 +0800'>Last updated on 2024-12-08</span>&nbsp;·&nbsp;Satti</div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e6%95%b0%e6%8d%ae%e5%ba%93 aria-label=数据库>数据库</a><ul><li><a href=#%e5%9f%ba%e6%9c%ac aria-label=基本>基本</a><ul><li><a href=#%e6%95%b0%e6%8d%ae%e5%ba%93-1 aria-label=数据库>数据库</a></li><li><a href=#nosql aria-label=NoSQL>NoSQL</a></li><li><a href=#%e5%ad%97%e7%ac%a6%e9%9b%86 aria-label=字符集>字符集</a></li></ul></li><li><a href=#sql aria-label=SQL>SQL</a></li><li><a href=#mysql aria-label=MySql>MySql</a><ul><li><a href=#%e5%9f%ba%e7%a1%80 aria-label=基础>基础</a></li><li><a href=#%e5%ad%97%e6%ae%b5 aria-label=字段>字段</a></li><li><a href=#%e6%9e%b6%e6%9e%84 aria-label=架构>架构</a></li><li><a href=#%e5%ad%98%e5%82%a8%e5%bc%95%e6%93%8e aria-label=存储引擎>存储引擎</a></li><li><a href=#%e6%9f%a5%e8%af%a2%e7%bc%93%e5%ad%98 aria-label=查询缓存>查询缓存</a></li><li><a href=#%e6%97%a5%e5%bf%97 aria-label=日志>日志</a></li></ul></li></ul></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><p> </p><p> </p><h2 id=数据库>数据库<a hidden class=anchor aria-hidden=true href=#数据库>#</a></h2><h3 id=基本>基本<a hidden class=anchor aria-hidden=true href=#基本>#</a></h3><h4 id=数据库-1>数据库<a hidden class=anchor aria-hidden=true href=#数据库-1>#</a></h4><ol><li>常见名词<ol><li>元组——一条记录就是一个元组（一行）</li><li>码——唯一标识实体的属性（一列）<ol><li>候选码——候选的可以唯一标识元组的码（且不包括多余属性——否则为<strong>超键</strong>）</li><li>主码——主键</li><li><strong>外码</strong>——另外关系中的主码</li><li>主属性（可以当候选码的） 非主属性（不包含在任何候选码的属性）</li></ol></li></ol></li><li>ER图——实体联系图<ol><li>包括：实体 属性 联系（实体与实体间的关系）</li><li>形状：矩形 椭圆 菱形（一一对应）</li></ol></li><li>范式：1NF（第一范式） 2NF 3NF<ol><li>1NF:字段有原子性 数据不可再分（每格数据不可再分）</li><li>2NF：消除非主属性对码的部分函数依赖（= 完全依赖）<ol><li>一张表中 X确定 Y必确定 = X&ndash;>Y（Y函数依赖于X）</li><li>X 的真子集 Xo&ndash;>Y（Y 部分函数依赖于 X）——数据冗余 CUD 异常</li></ol><ul><li>CRUD create read update delete</li></ul><ol start=3><li>完全依赖：(X,Y)&ndash;>Z 但X Y单个都不可依赖</li></ol></li><li>3NF:所有非主键属性间不能依赖 必相互独立</li></ol></li><li>外键与级联：<ol><li>级联更新&删除：更新/删除某主键 若其被其他表引用 则需更新/删除所有引用记录</li></ol></li><li>delete vs drop vs truncate<ol><li>用法：drop丢弃（table） truncate清空数据 id回到1 delete删除数据（行）id无影响</li><li>delete可以回滚 事务提交后生效（会产生日志）</li><li>drop释放表空间 truncate不产生日志（不能回滚</li></ol></li></ol><h4 id=nosql>NoSQL<a hidden class=anchor aria-hidden=true href=#nosql>#</a></h4><ol><li>与SQL的区别：<ol><li>非结构化存储 vs 结构化存储（固定行和列）</li><li>通常不支持ACID vs ACID<ol><li>MongoDB支持 但有所区别</li><li>atom consistency isolation durability</li></ol></li><li>balabal vs 性能取决于磁盘子系统 优化查询 索引 表结构等获得最佳性能</li><li>横向拓展（基于分片机制——水平分割 以行为单位分割并分开存储） vs 垂直（读写分离 分库分表 ···）</li></ol></li><li>特点：灵活 可拓展 高性能</li><li>类型：文档 键值 图形 宽列</li></ol><h4 id=字符集>字符集<a hidden class=anchor aria-hidden=true href=#字符集>#</a></h4><blockquote><p>utf8 utf8mb4</p></blockquote><ol><li>字符集合 eg.ASCII UTF(Unicode)</li><li>UTF-8 = 8比特UTF（一个字最多占3字节） UTF8mb4 = 一个字最多占据4字节的utf8<ol><li>Mysql指定字符集优先级 server-数据库-表-字段column渐增</li></ol></li><li>连接字符集：客户端与服务器沟通时相互翻译选择的字符集<ol><li>JDBC（Java操控数据库的api）驱动会影响连接字符集</li></ol></li></ol><h3 id=sql>SQL<a hidden class=anchor aria-hidden=true href=#sql>#</a></h3><blockquote><p>database&ndash;>table&ndash;>schema(ok for table/db)&ndash;>column&ndash;>row&ndash;>primary key</p></blockquote><ol><li>注意：所有空格都被忽略</li><li>连接JOIN关键字 ON指定连接条件（最终生成临时表）<ol><li>left right关键词&ndash;>即使右/左表<strong>没有满足条件的行</strong>也返回左/右表中的<strong>所有行</strong></li></ol></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-SQL data-lang=SQL><span class=line><span class=cl><span class=k>select</span><span class=w> </span><span class=n>something</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>table1</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>table2</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>table1</span><span class=p>.</span><span class=n>id</span><span class=o>=</span><span class=n>table2</span><span class=p>.</span><span class=n>id</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><ol start=3><li>索引 事务</li><li>例题（窗口函数balabal略）</li></ol><h3 id=mysql>MySql<a hidden class=anchor aria-hidden=true href=#mysql>#</a></h3><h4 id=基础>基础<a hidden class=anchor aria-hidden=true href=#基础>#</a></h4><ol><li>名词：<ol><li>关系型数据库：基于关系模型的数据库 关系模型表明db中存储数据间的联系</li><li>SQL：结构化查询语言</li></ol></li></ol><h4 id=字段>字段<a hidden class=anchor aria-hidden=true href=#字段>#</a></h4><ol><li><a href=https://Sattiluvcat.github.io/en/posts/java/mysql_base/#创建>字段类型</a><ul><li>数值 字符串 日期</li></ul></li><li>DECIMAL vs FLOAT/DOUBLE &ndash;> 避免精度损失</li><li>why：TEXT BLOB不建议？<ol><li>不常用：text ≈ 长文本的char varchar & bolb = 二进制大对象</li><li>缺点：不能有默认值 & 智能在磁盘上创建临时表 & 检索效率低</li></ol></li><li>diff：NULL vs ''<ol><li>NULL代表一个<strong>不确定</strong>的值&ndash;>不能用<code>= != > &lt;</code>等运算符 & <code>NULL=NULL</code> ==> False<ul><li>只能用<code>is NULL / is not NULL</code>查询</li></ul></li><li><code>''</code>长度为0 不占用空间 vs NULL要占用空间</li></ol></li><li>how：boolean类型？<ol><li><code>tinyint</code>类型&ndash;>只能存储0 or 1</li></ol></li></ol><h4 id=架构>架构<a hidden class=anchor aria-hidden=true href=#架构>#</a></h4><ol><li>what：执行sql语句的流程？<ul><li>连接器——身份认证&权限</li><li>查询缓存（mysql8.0后移除） 未命中后执行下述流程</li><li>分析器——检查语法···</li><li>优化器——选择最优执行方案</li><li>执行器——执行前先判断有否权限 无权限则报错 有则从存储引擎返回数据</li><li>插件式<strong>存储</strong>引擎——数据的<strong>存储与读取</strong> 支持InnoDB MyIsam ···</li></ul></li></ol><h4 id=存储引擎>存储引擎<a hidden class=anchor aria-hidden=true href=#存储引擎>#</a></h4><ol><li>架构？<ol><li>插件式架构 基于<strong>表</strong>（非数据库）</li></ol></li><li>MyISAM vs InnoDB<ol><li>行级锁 & MVCC ==> 不支持 vs 支持</li><li>事务 & 崩溃后的恢复 （同上）InnoDB使用redo log（同CS186）</li><li>外键 （同上）</li><li>索引实现 索引与数据分离 vs 数据文件即为索引文件（叶子节点）</li><li>缓存 键缓存（仅缓存数据页） vs buffer pool缓存数据页&索引页</li></ol></li></ol><h4 id=查询缓存>查询缓存<a hidden class=anchor aria-hidden=true href=#查询缓存>#</a></h4><blockquote><p>nothing</p></blockquote><h4 id=日志>日志<a hidden class=anchor aria-hidden=true href=#日志>#</a></h4><blockquote><p>CS186中采用ARIES策略 与下均类似 可参考</p></blockquote><ol><li>常见日志？<ul><li>错误日志 查询日志 中继日志（用于主从复制）</li><li>二进制日志</li><li>慢查询日志</li><li>事务日志（redo log & undo log）</li></ul></li><li>慢查询日志——记录执行时长超过阈值的查询语句<ul><li>用途：需要优化的查询 监控应用程序的数据库交互性能 容量规划</li></ul></li><li>what：binlog记录？<ol><li>描述数据库更改的事件 & <strong>可能已进行更改</strong>的语句的事件 & 时间戳</li><li>以事务为单位</li><li>用途：数据恢复 增量备份</li></ol></li><li>how：redo log保证持久性？（即使发生故障 数据也不会丢失）<ol><li>WAL预写日志——修改先写入redolog后事务提交<ul><li>eg.提交了事务但未写入磁盘（稳定存储设备） 写入磁盘的操作从redo log中移除</li></ul></li><li>顺序写入（写入到磁盘相邻位置）</li><li>崩溃恢复——InnoDB在重启后扫描redo log重做</li><li>双写缓冲——数据页先写入到双写缓冲区 后写入表空间</li><li>日志刷新——最严格的是每次事务提交时立即将redo log刷新到磁盘</li></ol></li></ol><script type=module>  
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs'; 
    mermaid.initialize({ startOnLoad: true });  
</script><script>Array.from(document.getElementsByClassName("language-mermaid")).forEach(e=>{e.parentElement.outerHTML=`<div class="mermaid">${e.innerHTML}</div>`})</script><style>.mermaid svg{display:block;margin:auto}</style></div><footer class=post-footer><ul class=post-tags><li><a href=https://Sattiluvcat.github.io/en/tags/java/>Java</a></li></ul><nav class=paginav><a class=prev href=https://Sattiluvcat.github.io/en/posts/hobbies/%E7%94%B5%E5%BD%B1top5/><span class=title>« Prev</span><br><span>个人电影Top5</span>
</a><a class=next href=https://Sattiluvcat.github.io/en/posts/java/cs186/><span class=title>Next »</span><br><span>CS186</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share 八股 on x" href="https://x.com/intent/tweet/?text=%e5%85%ab%e8%82%a1&amp;url=https%3a%2f%2fSattiluvcat.github.io%2fen%2fposts%2fnotes%2f%25E5%2585%25AB%25E8%2582%25A1%2f&amp;hashtags=Java"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 八股 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fSattiluvcat.github.io%2fen%2fposts%2fnotes%2f%25E5%2585%25AB%25E8%2582%25A1%2f&amp;title=%e5%85%ab%e8%82%a1&amp;summary=%e5%85%ab%e8%82%a1&amp;source=https%3a%2f%2fSattiluvcat.github.io%2fen%2fposts%2fnotes%2f%25E5%2585%25AB%25E8%2582%25A1%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 八股 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fSattiluvcat.github.io%2fen%2fposts%2fnotes%2f%25E5%2585%25AB%25E8%2582%25A1%2f&title=%e5%85%ab%e8%82%a1"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 八股 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fSattiluvcat.github.io%2fen%2fposts%2fnotes%2f%25E5%2585%25AB%25E8%2582%25A1%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 八股 on whatsapp" href="https://api.whatsapp.com/send?text=%e5%85%ab%e8%82%a1%20-%20https%3a%2f%2fSattiluvcat.github.io%2fen%2fposts%2fnotes%2f%25E5%2585%25AB%25E8%2582%25A1%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 八股 on telegram" href="https://telegram.me/share/url?text=%e5%85%ab%e8%82%a1&amp;url=https%3a%2f%2fSattiluvcat.github.io%2fen%2fposts%2fnotes%2f%25E5%2585%25AB%25E8%2582%25A1%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 八股 on ycombinator" href="https://news.ycombinator.com/submitlink?t=%e5%85%ab%e8%82%a1&u=https%3a%2f%2fSattiluvcat.github.io%2fen%2fposts%2fnotes%2f%25E5%2585%25AB%25E8%2582%25A1%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer><div id=disqus_thread></div><script>(function(){var e=document,t=e.createElement("script");t.src="https://www-sattiluvcat-github-io.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><script id=dsq-count-scr src=//www-sattiluvcat-github-io.disqus.com/count.js async></script></article></main><footer class=footer><span>&copy; 2024 <a href=https://Sattiluvcat.github.io/en/>Satti's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-551JRG13S2"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-551JRG13S2")</script></body></html>